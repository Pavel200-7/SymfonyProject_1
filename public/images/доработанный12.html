<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Доброрадных Наталия Станиславовна | Юридические услуги</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary-color: #247391;
            --secondary-color: #082c3a;
            --accent-color: #a7b7b4;
            --light-color: #ffffff;
            --dark-color: #000105;
            --neutral-color: #cfc5bb;
            --header-color: #c5edfc;
            --hero-color: #247391;
            --about-color: #ffffff;
            --services-color: #c5edfc;
            --faq-color: #ffffff;
            --contact-color: #c5edfc;
            --footer-color: #082c3a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            line-height: 1.6;
            color: var(--secondary-color);
            background-color: var(--light-color);
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* Header */
        header {
            background-color: var(--header-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            z-index: 1000;
            transition: all 0.3s;
        }
        
        header.sticky {
            background-color: rgba(197, 237, 252, 0.95);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            padding: 5px 0;
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            transition: all 0.3s;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo-img {
            width: 80px;
            height: 80px;
            margin-right: 15px;
            object-fit: cover;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--secondary-color);
        }
        
        .logo span {
            color: var(--primary-color);
        }
        
        .logo-phone {
            font-size: 18px;
            color: var(--primary-color);
            margin-top: 0px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 25px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
            font-size: 18px;
            transition: color 0.3s;
            position: relative;
        }
        
        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s;
        }
        
        .nav-links a:hover {
            color: var(--primary-color);
        }
        
        .nav-links a:hover::after {
            width: 100%;
        }
        
        .mobile-menu {
            display: none;
            font-size: 28px;
            cursor: pointer;
            color: var(--secondary-color);
        }
        
        /* Hero Section */
        .hero {
            height: 100vh;
            display: flex;
            align-items: center;
            padding-top: 80px;
            position: relative;
            overflow: hidden;
            background-color: var(--hero-color);
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(27, 86, 109, 0.822), rgba(8, 44, 58, 0.596));
            z-index: 1;
        }
        
        .hero-content {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
            z-index: 2;
        }
        
        .hero-left {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 20px;
            margin-right: 10px;
        }
        
        .hero-right {
            flex: 2; /* Изменено с 2 на 1, чтобы разделить пространство 50/50 */
            display: flex;
            flex-direction: column;
            justify-content: center; /* Центрируем по вертикали */
            align-items: center; /* Выравниваем по правому краю */
            text-align: center; /* Текст по правому краю */
            color: var(--light-color);
            padding: 20px;
            padding-right: 10%; /* Отступ от правого края */
            position: relative;
        }
        
        .hero-photo {
            width: 400px;
            height: 600px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            align-items: center; /* Выравнивание по вертикали */
            justify-content: center; /* Выравнивание по горизонтали */
        }

        .hero-photo img {
            width: 110%;
            height: 110%;
            object-fit: scale-down;
            display: block;
            margin: 0 auto;
            
        }
        
        .hero-logo {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translateX(-50%);
            width: 250px;
            height: auto;
            z-index: 3;
            display: none;
        }
        
        .hero-logo img {
            width: 100%;
            height: auto;
        }
        
        .hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            margin-top: 60px; /* Уменьшено с 60px */
        }
        
        .hero p {
            font-size: 20px;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            max-width: 80%;
        }
        
        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 30px;
            border-radius: 5px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
            text-align: center;
            min-width: 200px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #c0c0c0, #e0e0e0);
            color: var(--secondary-color);
            border: 2px solid #c0c0c0;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #e0e0e0, #c0c0c0);
            border-color: var(--secondary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-secondary {
            background-color: transparent;
            color: var(--light-color);
            border: 2px solid var(--light-color);
        }
        
        .btn-secondary:hover {
            background-color: var(--light-color);
            color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Floating CTA */
        .floating-cta {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: var(--primary-color);
            color: var(--light-color);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 999;
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(36, 115, 145, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(36, 115, 145, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(36, 115, 145, 0);
            }
        }
        
        .floating-cta:hover {
            transform: scale(1.1);
            background-color: var(--secondary-color);
            animation: none;
        }
        
        /* About Section */
        .section {
            padding: 100px 0;
            background-color: var(--section-bg-color, var(--about-color));
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .section-title h2 {
            font-size: 36px;
            color: var(--secondary-color);
            position: relative;
            display: inline-block;
            padding-bottom: 15px;
        }
        
        .section-title h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
        }
        
        .about-content {
            display: flex;
            align-items: center;
            gap: 50px;
            flex-wrap: wrap;
        }
        
        .about-img {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .about-img::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border: 5px solid var(--primary-color);
            border-radius: 10px;
            top: -20px;
            left: -20px;
            z-index: -1;
        }
        
        .about-img img {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.5s;
        }
        
        .about-img:hover img {
            transform: scale(1.03);
        }
        
        .about-text {
            flex: 1;
            min-width: 300px;
        }
        
        .about-text h3 {
            font-size: 28px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .about-text p {
            margin-bottom: 15px;
            color: var(--secondary-color);
        }
        
        .experience {
            display: flex;
            margin-top: 30px;
            gap: 30px;
        }
        
        .exp-item {
            text-align: center;
            padding: 20px;
            background-color: rgba(167, 183, 180, 0.1);
            border-radius: 10px;
            transition: transform 0.3s;
        }
        
        .exp-item:hover {
            transform: translateY(-5px);
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .exp-item i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        .exp-item h4 {
            font-size: 24px;
            margin-bottom: 5px;
            color: var(--secondary-color);
        }
        
        /* Services Section */
        .services {
            background-color: var(--services-color);
        }
        
        .services-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .service-card {
            background-color: var(--light-color);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
            border-top: 3px solid var(--primary-color);
        }
        
        .service-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .service-card i {
            font-size: 40px;
            color: var(--primary-color);
            margin-bottom: 20px;
            display: block;
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }
        
        .service-card h3 {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--secondary-color);
            text-align: center;
        }
        
        .service-card p {
            margin-bottom: 20px;
            color: var(--secondary-color);
            text-align: center;
        }
        
        
        .service-card a:hover {
            color: var(--secondary-color);
        }
        
        .service-card a i {
            font-size: 16px;
            margin-left: 5px;
            transition: transform 0.3s;
        }
        
        .service-card a:hover i {
            transform: translateX(5px);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 18px;
            font-weight: 600;
            color: var(--secondary-color);
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px 5px 0 0;
        }
        
        .tab-btn:hover {
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .tab-btn.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: grid;
        }
        
        /* FAQ Section */
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .faq-item {
            margin-bottom: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .faq-item:hover {
            border-color: var(--primary-color);
        }
        
        .faq-question {
            padding: 15px 20px;
            background-color: var(--light-color);
            color: var(--secondary-color);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.3s;
        }
        
        .faq-question:hover {
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .faq-question i {
            transition: transform 0.3s;
            color: var(--primary-color);
        }
        
        .faq-question.active {
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .faq-question.active i {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s, padding 0.3s;
            background-color: rgba(167, 183, 180, 0.1);
        }
        
        .faq-answer.active {
            padding: 15px 20px;
            max-height: 500px;
        }
        
        /* Contact Section */
        .contact {
            background-color: var(--contact-color);
        }
        
        .contact-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 50px;
        }
        
        .contact-info h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .contact-details {
            margin-bottom: 30px;
        }
        
        .contact-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .contact-item i {
            font-size: 20px;
            color: var(--primary-color);
            margin-right: 15px;
            margin-top: 3px;
        }
        
        .contact-item h4 {
            color: var(--secondary-color);
            margin-bottom: 5px;
        }
        
        .contact-item p {
            color: var(--secondary-color);
        }
        
        .social-links {
            display: flex;
            gap: 15px;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: var(--light-color);
            transition: all 0.3s;
        }
        
        .social-links a:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }
        
        .contact-form {
            background-color: var(--light-color);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .contact-form h3 {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--secondary-color);
        }
        
        .contact-form .form-group {
            margin-bottom: 20px;
        }
        
        .contact-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .contact-form input,
        .contact-form textarea,
        .contact-form select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .contact-form input:focus,
        .contact-form textarea:focus,
        .contact-form select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(36, 115, 145, 0.2);
        }
        
        .contact-form textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .map {
            height: 300px;
            margin-top: 50px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 5px solid var(--light-color);
        }
        
        .map iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Footer */
        footer {
            background-color: var(--footer-color);
            color: var(--light-color);
            padding: 50px 0 20px;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-col h3 {
            font-size: 20px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            color: var(--light-color);
        }
        
        .footer-col h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary-color);
        }
        
        .footer-col p {
            color: var(--accent-color);
            margin-bottom: 15px;
        }
        
        .footer-col ul {
            list-style: none;
        }
        
        .footer-col ul li {
            margin-bottom: 10px;
        }
        
        .footer-col ul li a {
            color: var(--accent-color);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-col ul li a:hover {
            color: var(--primary-color);
        }
        
        .footer-col ul li i {
            margin-right: 10px;
            color: var(--primary-color);
            width: 20px;
            text-align: center;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 14px;
            color: var(--accent-color);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1001;
            overflow-y: auto;
        }
        
        .modal-content {
            background-color: var(--light-color);
            margin: 50px auto;
            border-radius: 10px;
            overflow: hidden;
            animation: modalFadeIn 0.3s;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 95%;
        }
        
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            padding: 20px;
            background-color: var(--primary-color);
            color: var(--light-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            margin: 0;
        }
        
        .close-modal {
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--secondary-color);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        /* Admin Modal */
        .admin-modal .modal-content {
            max-width: 1200px;
        }
        
        .admin-nav {
            display: flex;
            margin-bottom: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .admin-nav-item {
            padding: 15px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        
        .admin-nav-item.active {
            border-bottom: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .admin-nav-item:hover {
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .admin-nav-item:hover:not(.active) {
            border-bottom: 3px solid rgba(36, 115, 145, 0.1);
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-top: 3px solid var(--primary-color);
        }
        
        .stat-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .stat-card .value {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-color);
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        
        .admin-table th, 
        .admin-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .admin-table th {
            background-color: #f9f9f9;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .admin-table tr:hover {
            background-color: #f5f7fa;
        }
        
        .action-btns {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            padding: 5px;
            border-radius: 3px;
            cursor: pointer;
            color: white;
            font-size: 12px;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .edit-btn {
            background-color: var(--primary-color);
        }
        
        .delete-btn {
            background-color: #dc3545;
        }
        
        .view-btn {
            background-color: #28a745;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .badge-success {
            background-color: #d4edda;
            color: #155724;
        }
        
        .badge-warning {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .badge-danger {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        .page-item {
            margin: 0 5px;
        }
        
        .page-link {
            display: block;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            color: var(--primary-color);
            text-decoration: none;
        }
        
        .page-link:hover {
            background-color: #f5f5f5;
        }
        
        .page-item.active .page-link {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .search-bar {
            display: flex;
            margin-bottom: 20px;
        }
        
        .search-bar input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            font-size: 14px;
        }
        
        .search-bar button {
            padding: 10px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }
        
        .filter-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .filter-bar select {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(36, 115, 145, 0.2);
        }
        
        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }
        
        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }
        
        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: block;
            padding: 10px 15px;
            border: 1px dashed #ddd;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .file-upload-label:hover {
            border-color: var(--primary-color);
            background-color: rgba(36, 115, 145, 0.05);
        }
        
        .preview-image {
            max-width: 100px;
            max-height: 100px;
            margin-top: 10px;
            display: block;
        }
        
        .status-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .status-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #28a745;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Edit Mode Styles */
        .editable {
            position: relative;
            outline: 1px dashed rgba(36, 115, 145, 0.3);
            transition: all 0.2s;
            min-height: 20px;
            padding: 5px;
            cursor: pointer;
        }
        
        .editable:hover {
            outline: 1px dashed var(--primary-color);
            background-color: rgba(36, 115, 145, 0.05);
        }
        
        .editable.active {
            outline: 2px solid var(--primary-color);
            background-color: rgba(36, 115, 145, 0.1);
        }
        
        .edit-mode-indicator {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 14px;
            z-index: 1001;
            display: none;
        }
        
        /* Word-like editor styles */
        .editor-toolbar {
            position: fixed;
            top: 60px;
            left: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            padding: 10px;
            z-index: 1002;
            display: none;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 80%;
        }
        
        .editor-toolbar button {
            background: none;
            border: 1px solid #ddd;
            border-radius: 3px;
            padding: 5px 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 30px;
            height: 30px;
        }
        
        .editor-toolbar button:hover {
            background-color: #f5f5f5;
        }
        
        .editor-toolbar button.active {
            background-color: #e0e0e0;
        }
        
        .editor-toolbar select {
            padding: 5px;
            border-radius: 3px;
            border: 1px solid #ddd;
            height: 30px;
        }
        
        .editor-toolbar .separator {
            width: 1px;
            height: 30px;
            background-color: #ddd;
            margin: 0 5px;
        }
        
        /* Back to Top Button */
        .back-to-top {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            color: var(--light-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .back-to-top.active {
            opacity: 1;
            visibility: visible;
        }
        
        .back-to-top:hover {
            background-color: var(--secondary-color);
            transform: translateY(-3px);
        }
        
        /* Admin Panel Toggle */
        .admin-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: none;
        }
        
        /* Gallery Styles */
        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .gallery-item {
            position: relative;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            transition: all 0.3s;
        }
        
        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .gallery-item img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .gallery-item-info {
            padding: 10px;
            background-color: white;
        }
        
        .gallery-item-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .gallery-item-desc {
            font-size: 12px;
            color: #666;
        }
        
        .gallery-item-actions {
            position: absolute;
            top: 5px;
            right: 5px;
            display: flex;
            gap: 5px;
        }
        
        .gallery-item-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background-color: rgba(0,0,0,0.5);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .gallery-item-btn:hover {
            background-color: rgba(0,0,0,0.8);
        }
        
        .add-gallery-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ddd;
            border-radius: 5px;
            height: 100%;
            min-height: 200px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .add-gallery-item:hover {
            border-color: var(--primary-color);
            background-color: rgba(36, 115, 145, 0.05);
        }
        
        .add-gallery-item i {
            font-size: 36px;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        
        /* Color Picker Styles */
        .color-picker-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .color-picker-item {
            flex: 1;
            min-width: 200px;
        }
        
        .color-picker-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .color-picker {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-picker input[type="color"] {
            width: 50px;
            height: 30px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .color-picker input[type="text"] {
            flex: 1;
            padding: 5px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        /* Custom Modal Styles */
        .custom-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1002;
            overflow-y: auto;
        }
        
        .custom-modal-content {
            background-color: white;
            margin: 50px auto;
            border-radius: 10px;
            overflow: hidden;
            max-width: 800px;
            width: 90%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }
        
        .custom-modal-header {
            padding: 15px 20px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .custom-modal-header h3 {
            margin: 0;
            font-size: 20px;
        }
        
        .custom-modal-close {
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .custom-modal-close:hover {
            color: var(--secondary-color);
        }
        
        .custom-modal-body {
            padding: 20px;
        }
        
        .detail-row {
            display: flex;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .detail-row strong {
            width: 150px;
            font-weight: 600;
        }
        
        .detail-row span, .detail-row p {
            flex: 1;
        }
        
        .detail-row.full-width {
            flex-direction: column;
        }
        
        .detail-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            z-index: 10000;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: slideIn 0.3s forwards;
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 400px;
        }
        
        .notification-close {
            margin-left: 15px;
            cursor: pointer;
            font-size: 18px;
            opacity: 0.8;
        }
        
        .notification-close:hover {
            opacity: 1;
        }
        
        .notification-success {
            background-color: #28a745;
        }
        
        .notification-error {
            background-color: #dc3545;
        }
        
        .notification-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .notification-info {
            background-color: #17a2b8;
        }
        
        .notification.fade-out {
            animation: fadeOut 0.5s forwards;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        
        /* Validation Styles */
        .is-invalid {
            border-color: #dc3545 !important;
        }
        
        .invalid-feedback {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
                position: absolute;
                top: 80px;
                left: 0;
                width: 100%;
                background-color: var(--header-color);
                flex-direction: column;
                align-items: center;
                padding: 20px 0;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links li {
                margin: 10px 0;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .hero {
                flex-direction: column;
            }
            
            .hero-content {
                flex-direction: column;
            }
            
            .hero-left, .hero-right {
                flex: none;
                width: 100%;
            }
            
            .hero-photo {
                width: 300px;
                height: 400px;
            }
            
            
            .hero h1 {
                font-size: 36px;
            }
            
            .hero p {
                font-size: 18px;
                max-width: 100%;
            }
            
            .about-content {
                flex-direction: column;
            }
            
            .about-img::before {
                display: none;
            }
            
            .experience {
                flex-direction: column;
                gap: 20px;
            }
            
            .section {
                padding: 60px 0;
            }
            
            .floating-cta {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .back-to-top {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .admin-toggle {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .modal-content {
                margin: 20px auto;
                width: 95%;
            }
            
            .admin-nav {
                flex-wrap: wrap;
            }
            
            .admin-nav-item {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .editor-toolbar {
                top: 50px;
                left: 10px;
                right: 10px;
                max-width: none;
            }
            
            .gallery-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .color-picker-item {
                min-width: 100%;
            }
            
            .detail-row {
                flex-direction: column;
            }
            
            .detail-row strong {
                width: 100%;
                margin-bottom: 5px;
            }
        }
        /* Auth Modal Styles */
        .auth-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .auth-tab {
            padding: 12px 20px;
            cursor: pointer;
            font-weight: 600;
            color: var(--secondary-color);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .auth-tab:hover {
            color: var(--primary-color);
            background-color: rgba(36, 115, 145, 0.05);
        }

        .auth-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .auth-content {
            display: none;
            animation: fadeIn 0.3s;
        }

        .auth-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Auth Form Styles */
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
        }

        .auth-form .form-group {
            margin-bottom: 20px;
        }

        .auth-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        .auth-form input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: all 0.3s;
        }

        .auth-form input:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(36, 115, 145, 0.1);
        }

        .auth-form button[type="submit"] {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .auth-form button[type="submit"]:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .auth-form .form-footer {
            margin-top: 20px;
            text-align: center;
            font-size: 14px;
            color: #666;
        }

        .auth-form .form-footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-form .form-footer a:hover {
            text-decoration: underline;
        }

        /* Modal Header Specific for Auth */
        #authModal .modal-header {
            background-color: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 8px 8px 0 0;
        }

        #authModal .modal-header h3 {
            margin: 0;
            font-size: 22px;
            font-weight: 600;
        }

        #authModal .close-modal {
            color: white;
            font-size: 24px;
            opacity: 0.8;
            transition: opacity 0.3s;
        }

        #authModal .close-modal:hover {
            opacity: 1;
        }

        /* Modal Body Specific for Auth */
        #authModal .modal-body {
            padding: 30px;
            background-color: #f9f9f9;
            border-radius: 0 0 8px 8px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .auth-tabs {
                flex-direction: column;
                border-bottom: none;
            }
            
            .auth-tab {
                border-bottom: 1px solid #eee;
                border-left: 3px solid transparent;
            }
            
            .auth-tab.active {
                border-left-color: var(--primary-color);
                border-bottom-color: #eee;
            }
            
            #authModal .modal-body {
                padding: 20px;
            }
        }
/* Общие улучшения для мобильных устройств */
        @media (max-width: 768px) {
            /* Уменьшаем отступы секций */
            .section {
                padding: 50px 0;
            }
            
            /* Уменьшаем размер заголовков секций */
            .section-title h2 {
                font-size: 28px;
                padding-bottom: 10px;
            }
            
            /* Оптимизация контейнера */
            .container {
                width: 95%;
                padding: 0 10px;
            }
            
            /* Улучшаем навигацию */
            header.sticky {
                padding: 0;
            }
            
            .logo-img {
                width: 60px;
                height: 60px;
                margin-right: 10px;
            }
            
            .logo {
                font-size: 20px;
            }
            
            .logo-phone {
                font-size: 16px;
            }
            
            /* Герой-секция */
            .hero {
                height: auto;
                min-height: 100vh;
                padding-top: 70px;
                flex-direction: column;
            }
            
            .hero-content {
                flex-direction: column;
            }
            
            .hero-left, .hero-right {
                flex: none;
                width: 100%;
                padding: 10px;
            }
            
            .hero-left {
                justify-content: center;
                margin-right: 0;
                margin-top: 20px;
            }
            
            .hero-photo {
                width: 280px;
                height: 380px;
                margin: 0 auto;
            }
            
            .hero h1 {
                font-size: 32px;
                margin-top: 20px;
                margin-bottom: 15px;
            }
            
            .hero p {
                font-size: 16px;
                margin-bottom: 20px;
                max-width: 100%;
            }
            
            .cta-buttons {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                min-width: 100%;
                padding: 10px 20px;
            }
            
            /* Секция "Обо мне" */
            .about-content {
                flex-direction: column;
                gap: 30px;
            }
            
            .about-img {
                min-width: 100%;
            }
            
            .about-img::before {
                display: none;
            }
            
            .about-text h3 {
                font-size: 24px;
            }
            
            .experience {
                flex-direction: column;
                gap: 15px;
            }
            
            .exp-item {
                padding: 15px;
            }
            
            /* Секция услуг */
            .services-container {
                grid-template-columns: 1fr;
            }
            
            .service-card {
                padding: 20px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                width: 100%;
                padding: 10px;
                border-radius: 5px;
                border-bottom: none;
                border-left: 3px solid transparent;
            }
            
            .tab-btn.active {
                border-bottom: none;
                border-left: 3px solid var(--primary-color);
            }
            
            /* FAQ секция */
            .faq-question {
                padding: 12px 15px;
                font-size: 16px;
            }
            
            /* Контактная секция */
            .contact-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .contact-form {
                padding: 20px;
            }
            
            .map {
                height: 250px;
                margin-top: 30px;
            }
            
            /* Футер */
            .footer-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            /* Модальные окна */
            .modal-content {
                width: 95%;
                margin: 10px auto;
            }
            
            /* Плавающие кнопки */
            .floating-cta {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 20px;
                right: 20px;
            }
            
            .chat-button {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 80px;
                right: 20px;
            }
            
            .back-to-top {
                width: 40px;
                height: 40px;
                font-size: 16px;
                bottom: 140px;
                right: 20px;
            }
            
            /* Чат */
            .chat-modal {
                width: 90%;
                height: 70vh;
                bottom: 80px;
                right: 5%;
            }
            
            /* Админ-панель */
            .admin-toggle {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .admin-nav {
                flex-direction: column;
            }
            
            .admin-nav-item {
                padding: 10px;
                border-bottom: 1px solid #eee;
                border-left: 3px solid transparent;
            }
            
            .admin-nav-item.active {
                border-bottom: none;
                border-left: 3px solid var(--primary-color);
            }
            
            /* Формы */
            input, textarea, select {
                font-size: 16px !important;
            }
        }
    </style>
    <!-- стиль и чата -->
    <style>
        /* Chat Button Styles */
        .chat-button {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 999;
            transition: all 0.3s;
            animation: pulse 2s infinite;
        }

        .chat-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.1);
            animation: none;
        }

        /* Chat Modal Styles */
        .chat-modal {
            display: none;
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            max-width: 90%;
            height: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            z-index: 1000;
            flex-direction: column;
        }

        .chat-header {
            padding: 15px;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .chat-close {
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }

        .chat-close:hover {
            color: var(--secondary-color);
        }

        .chat-body {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .chat-message {
            margin-bottom: 15px;
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            position: relative;
        }

        .chat-message-user {
            background-color: var(--primary-color);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 5px;
        }

        .chat-message-bot {
            background-color: #e0e0e0;
            color: #333;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }

        .message-content {
            word-wrap: break-word;
        }

        .message-time {
            font-size: 10px;
            text-align: right;
            margin-top: 5px;
            opacity: 0.7;
        }

        .chat-footer {
            display: flex;
            padding: 10px;
            border-top: 1px solid #eee;
            background-color: white;
        }

        .chat-footer input {
            flex: 1;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chat-footer button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chat-footer button:hover {
            background-color: var(--secondary-color);
        }

        @media (max-width: 768px) {
            .chat-button {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 80px;
                right: 20px;
            }            
            .hero-right {
                padding-top: 5px; /* Было 100px, уменьшаем отступ сверху */
            }
        }
            .chat-modal {
                width: 300px;
                height: 400px;
                bottom: 80px;
                right: 20px;
            }
        }
    </style>
    <!-- стиль звонка -->
    <style>
        /* Обновленные стили для видео */
        .video-container {
            width: 100%;
            height: 300px; /* Увеличили высоту */
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            display: none;
        }
        
        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .local-video {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 120px; /* Увеличили размер */
            height: 90px; /* Увеличили размер */
            border: 2px solid white;
            border-radius: 5px;
            z-index: 10;
        }
        
        /* Увеличим само модальное окно чата */
        .chat-modal {
            width: 400px; /* Было 350px */
            height: 650px; /* Было 500px */
            max-width: 95%;
        }
    </style>

    <style>
        /* Video/Audio Call Styles */
        .call-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 10px;
        }

        .call-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 20px;
            color: white;
        }

        .video-call-btn {
            background-color: #4CAF50;
        }

        .audio-call-btn {
            background-color: #2196F3;
        }

        .end-call-btn {
            background-color: #F44336;
        }

        .call-btn:hover {
            transform: scale(1.1);
        }

        .video-container {
            width: 100%;
            height: 200px;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
            position: relative;
            display: none;
        }

        .video-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .local-video {
            position: absolute;
            bottom: 10px;
            right: 10px;
            width: 100px;
            height: 75px;
            border: 2px solid white;
            border-radius: 5px;
            z-index: 10;
        }

        .call-status {
            text-align: center;
            margin: 10px 0;
            font-weight: 600;
            color: var(--primary-color);
            display: none;
        }

        .incoming-call {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            z-index: 1001;
            text-align: center;
            display: none;
        }

        .incoming-call-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
        }

        .incoming-call-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 20px;
            color: white;
        }

        .accept-call-btn {
            background-color: #4CAF50;
        }

        .reject-call-btn {
            background-color: #F44336;
        }
    </style>
</head>
<body>
    <!-- Edit Mode Indicator -->
    <div class="edit-mode-indicator" id="editModeIndicator">
        Режим редактирования
    </div>
    
    <!-- Editor Toolbar -->
    <div class="editor-toolbar" id="editorToolbar">
        <button data-command="bold" title="Жирный"><i class="fas fa-bold"></i></button>
        <button data-command="italic" title="Курсив"><i class="fas fa-italic"></i></button>
        <button data-command="underline" title="Подчеркивание"><i class="fas fa-underline"></i></button>
        <div class="separator"></div>
        <select id="fontFamily" title="Шрифт">
            <option value="Arial, sans-serif">Arial</option>
            <option value="Times New Roman, serif">Times New Roman</option>
            <option value="Courier New, monospace">Courier New</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="'Segoe UI', Tahoma, Geneva, Verdana, sans-serif">Segoe UI</option>
        </select>
        <select id="fontSize" title="Размер шрифта">
            <option value="1">8px</option>
            <option value="2">10px</option>
            <option value="3">12px</option>
            <option value="4">14px</option>
            <option value="5">18px</option>
            <option value="6">24px</option>
            <option value="7">36px</option>
        </select>
        <div class="separator"></div>
        <button data-command="justifyLeft" title="Выровнять по левому краю"><i class="fas fa-align-left"></i></button>
        <button data-command="justifyCenter" title="Выровнять по центру"><i class="fas fa-align-center"></i></button>
        <button data-command="justifyRight" title="Выровнять по правому краю"><i class="fas fa-align-right"></i></button>
        <div class="separator"></div>
        <button data-command="insertUnorderedList" title="Маркированный список"><i class="fas fa-list-ul"></i></button>
        <button data-command="insertOrderedList" title="Нумерованный список"><i class="fas fa-list-ol"></i></button>
        <div class="separator"></div>
        <button data-command="createLink" title="Добавить ссылку"><i class="fas fa-link"></i></button>
        <button data-command="unlink" title="Удалить ссылку"><i class="fas fa-unlink"></i></button>
        <div class="separator"></div>
        <button data-command="undo" title="Отменить"><i class="fas fa-undo"></i></button>
        <button data-command="redo" title="Повторить"><i class="fas fa-redo"></i></button>
        <div class="separator"></div>
        <button id="saveEditBtn" title="Сохранить изменения"><i class="fas fa-save"></i></button>
        <button id="cancelEditBtn" title="Отменить редактирование"><i class="fas fa-times"></i></button>
    </div>

    <!-- Admin Panel Toggle -->
    <button class="admin-toggle" id="adminToggleBtn">
        <i class="fas fa-cog"></i>
    </button>

    <!-- Header -->
    <header>
        <div class="container">
            <nav>
                <div class="logo-container">
                    <img src="logo.png" alt="Логотип" class="logo-img" id="headerLogo">
                    <div class="logo-text">
                        <div class="logo" data-editable="true" data-key="headerTitle">Доброрадных <span>Н.С.</span></div>
                        <div class="logo-phone" data-editable="true" data-key="headerPhone">8 921 522 30 11</div>
                    </div>
                </div>
                <ul class="nav-links">
                    <li><a href="#home" data-editable="true" data-key="navLink1">Главная</a></li>
                    <li><a href="#about" data-editable="true" data-key="navLink2">Обо мне</a></li>
                    <li><a href="#services" data-editable="true" data-key="navLink3">Услуги</a></li>
                    <li><a href="#faq" data-editable="true" data-key="navLink4">FAQ</a></li>
                    <li><a href="#contact" data-editable="true" data-key="navLink5">Контакты</a></li>
                </ul>
                <div class="mobile-menu">
                    <i class="fas fa-bars"></i>
                </div>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home" style="background-image: url('Фон.png'); background-size: cover; background-position: center;">
        <div class="hero-content">
            <div class="hero-left">
                <div class="hero-photo">
                    <img src="фото на баннер пнг.png" alt="Доброрадных Наталия Станиславовна" id="heroPhoto">
                </div>
            </div>
            <div class="hero-right">
                <div class="hero-logo">
                    <img src="logo1.png" alt="Логотип" id="heroLogo">
                </div>
                <h1 data-editable="true" data-key="heroTitle">Профессиональное юридическое решение любой сложности</h1>
                <p data-editable="true" data-key="heroText">Если это можно решить законно — значит, я это сделаю. Решение сложных юридических вопросов. Индивидуальный подход к каждому клиенту.</p>
                <div class="cta-buttons">
                    <a href="#consultation-form" class="btn btn-primary">Записаться на консультацию</a>
                    <a href="#" class="btn btn-secondary" id="personalAccountBtn">Личный кабинет</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Floating CTA -->
    <div class="floating-cta" id="floating-cta">
        <i class="fas fa-phone-alt"></i>
    </div>

    <!-- Back to Top Button -->
    <div class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <!-- About Section -->
    <section class="section" id="about">
        <div class="container">
            <div class="section-title">
                <h2>Обо мне</h2>
            </div>
            <div class="about-content">
                <div class="about-img">
                    <img src="lawyer-photo.jpg" alt="Доброрадных Наталия Станиславовна" id="aboutPhoto">
                </div>
                <div class="about-text">
                    <h3 data-editable="true" data-key="aboutName">Доброрадных Наталия Станиславовна</h3>
                    <p data-editable="true" data-key="aboutText1">Я - профессиональный юрист с более чем 20-летним опытом работы в различных областях права. Моя миссия - предоставлять качественные юридические услуги, защищать интересы клиентов и помогать в решении самых сложных правовых вопросов.</p>
                    <p data-editable="true" data-key="aboutText2">Окончила юридический факультет МГУ им. М.В. Ломоносова, имею ряд специализированных сертификатов. Регулярно повышаю квалификацию и слежу за изменениями в законодательстве.</p>
                    <div class="experience">
                        <div class="exp-item">
                            <i class="fas fa-briefcase"></i>
                            <h4 data-editable="true" data-key="expYears">20</h4>
                            <p data-editable="true" data-key="expYearsText">Лет опыта</p>
                        </div>
                        <div class="exp-item">
                            <i class="fas fa-graduation-cap"></i>
                            <h4 data-editable="true" data-key="expEducation">МГУ</h4>
                            <p data-editable="true" data-key="expEducationText">Образование</p>
                        </div>
                        <div class="exp-item">
                            <i class="fas fa-award"></i>
                            <h4 data-editable="true" data-key="expCases">100+</h4>
                            <p data-editable="true" data-key="expCasesText">Успешных дел</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Services Section -->
    <section class="section services" id="services">
        <div class="container">
            <div class="section-title">
                <h2>Услуги</h2>
            </div>
            <div class="tabs">
                <button class="tab-btn active" data-tab="individual">Физическим лицам</button>
                <button class="tab-btn" data-tab="business">Юридическим лицам</button>
            </div>
            <div class="tab-content active" id="individual">
                <div class="services-container">
                    <div class="service-card">
                        <i class="fas fa-balance-scale"></i>
                        <h3 data-editable="true" data-key="service1Title">Гражданское право</h3>
                        <p data-editable="true" data-key="service1Text">Защита прав в сфере гражданских правоотношений, составление договоров, разрешение споров.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-file-invoice-dollar"></i>
                        <h3 data-editable="true" data-key="service2Title">Налоговое право</h3>
                        <p data-editable="true" data-key="service2Text">Консультации по налоговому праву, сопровождение налоговых проверок, решение споров с ФНС.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-home"></i>
                        <h3 data-editable="true" data-key="service3Title">Семейное право</h3>
                        <p data-editable="true" data-key="service3Text">Расторжение брака, раздел имущества, алименты, определение места жительства детей.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-briefcase"></i>
                        <h3 data-editable="true" data-key="service4Title">Трудовое право</h3>
                        <p data-editable="true" data-key="service4Text">Трудовые споры, незаконное увольнение, восстановление на работе, взыскание заработной платы.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-gavel"></i>
                        <h3 data-editable="true" data-key="service5Title">Административное право</h3>
                        <p data-editable="true" data-key="service5Text">Обжалование действий государственных органов, защита в административных делах.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-landmark"></i>
                        <h3 data-editable="true" data-key="service6Title">Представительство в суде</h3>
                        <p data-editable="true" data-key="service6Text">Полное сопровождение судебных процессов, составление процессуальных документов.</p>
                    </div>
                </div>
            </div>
            <div class="tab-content" id="business">
                <div class="services-container">
                    <div class="service-card">
                        <i class="fas fa-globe"></i>
                        <h3 data-editable="true" data-key="service7Title">Международное право</h3>
                        <p data-editable="true" data-key="service7Text">Правовое сопровождение международных сделок, разрешение трансграничных споров.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-handshake"></i>
                        <h3 data-editable="true" data-key="service8Title">Арбитраж</h3>
                        <p data-editable="true" data-key="service8Text">Представительство интересов в арбитражных судах, сопровождение экономических споров.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-chart-line"></i>
                        <h3 data-editable="true" data-key="service9Title">Финансовое право</h3>
                        <p data-editable="true" data-key="service9Text">Консультации по финансовым операциям, сопровождение сделок, защита от рейдерских захватов.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-building"></i>
                        <h3 data-editable="true" data-key="service10Title">Корпоративное право</h3>
                        <p data-editable="true" data-key="service10Text">Создание и реорганизация юридических лиц, корпоративные споры, защита прав акционеров.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-exclamation-triangle"></i>
                        <h3 data-editable="true" data-key="service11Title">Банкротство предприятий</h3>
                        <p data-editable="true" data-key="service11Text">Сопровождение процедур банкротства, защита от банкротства, представительство кредиторов.</p>
                    </div>
                    <div class="service-card">
                        <i class="fas fa-user-tie"></i>
                        <h3 data-editable="true" data-key="service12Title">Абонентское обслуживание</h3>
                        <p data-editable="true" data-key="service12Text">Комплексное юридическое сопровождение бизнеса на постоянной основе.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section class="section" id="faq">
        <div class="container">
            <div class="section-title">
                <h2>Частые вопросы</h2>
            </div>
            <div class="faq-container">
                <div class="faq-item">
                    <div class="faq-question">
                        <span data-editable="true" data-key="faq1Question">Как записаться на консультацию?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p data-editable="true" data-key="faq1Answer">Вы можете записаться на консультацию через форму на сайте, по телефону или в нашем офисе. Для записи онлайн заполните форму обратной связи, и мы свяжемся с вами для уточнения деталей.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span data-editable="true" data-key="faq2Question">Сколько стоит первичная консультация?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p data-editable="true" data-key="faq2Answer">Стоимость первичной консультации зависит от сложности вопроса и составляет от 3 000 рублей. Точную стоимость мы сможем назвать после предварительного ознакомления с вашей ситуацией.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span data-editable="true" data-key="faq3Question">Как происходит оплата услуг?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p data-editable="true" data-key="faq3Answer">Оплата может производиться наличными в офисе, банковским переводом или через онлайн-платежи. Для каждого клиента мы составляем договор с четным указанием стоимости и порядка оплаты услуг.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span data-editable="true" data-key="faq4Question">Какие документы нужно подготовить к первой встрече?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p data-editable="true" data-key="faq4Answer">Для первой консультации желательно иметь при себе все документы, относящиеся к вашему вопросу (договоры, судебные решения, переписку и т.д.). Если документов много, можно заранее прислать их копии на нашу почту.</p>
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">
                        <span data-editable="true" data-key="faq5Question">Возможно ли дистанционное оказание услуг?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p data-editable="true" data-key="faq5Answer">Да, мы предоставляем услуги дистанционно через видеоконсультации, электронную почту и мессенджеры. Все документы могут быть подписаны электронной подписью или через курьерскую службу.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="section contact" id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Контакты</h2>
            </div>
            <div class="contact-container">
                <div class="contact-info">
                    <h3>Контактная информация</h3>
                    <div class="contact-details">
                        <div class="contact-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4>Адрес:</h4>
                                <p data-editable="true" data-key="contactAddress">г. Москва, ул. Правовая, д. 15, офис 305</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone-alt"></i>
                            <div>
                                <h4>Телефон:</h4>
                                <p data-editable="true" data-key="contactPhone">8 921 522 30 11</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <div>
                                <h4>Email:</h4>
                                <p data-editable="true" data-key="contactEmail">pns-75@mail.ru</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4>Часы работы:</h4>
                                <p data-editable="true" data-key="contactHours">
                                    Понедельник-Пятница: 10:00 - 17:00 (обед 13:00 - 14:00)<br>
                                    Суббота: 10:00 - 13:00<br>
                                    Воскресенье: выходной
                                </p>
                            </div>
                        </div>
                    </div>
                    <h3>Социальные сети</h3>
                    <div class="social-links">
                        <a href="#" class="social-link" data-social="telegram"><i class="fab fa-telegram"></i></a>
                        <a href="#" class="social-link" data-social="whatsapp"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="social-link" data-social="vk"><i class="fab fa-vk"></i></a>
                    </div>
                </div>
                <div class="contact-form" id="consultation-form">
                    <h3>Запись на консультацию</h3>
                    <form id="consultForm">
                        <div class="form-group">
                            <label for="name">Ваше имя*</label>
                            <input type="text" id="name" name="name" required>
                            <div class="invalid-feedback" id="nameError"></div>
                        </div>
                        <div class="form-group">
                            <label for="phone">Телефон*</label>
                            <input type="tel" id="phone" name="phone" required>
                            <div class="invalid-feedback" id="phoneError"></div>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email">
                            <div class="invalid-feedback" id="emailError"></div>
                        </div>
                        <div class="form-group">
                            <label for="service">Интересующая услуга</label>
                            <select id="service" name="service">
                                <option value="">-- Выберите услугу --</option>
                                <option value="civil">Гражданское право</option>
                                <option value="family">Семейное право</option>
                                <option value="labor">Трудовое право</option>
                                <option value="tax">Налоговое право</option>
                                <option value="corporate">Корпоративное право</option>
                                <option value="other">Другое</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="message">Опишите вашу ситуацию</label>
                            <textarea id="message" name="message"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Отправить заявку</button>
                    </form>
                </div>
            </div>
            <div class="map">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2245.372951920377!2d37.61531071593084!3d55.75202398055309!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x46b54a5a738fa419%3A0x7f3477b4b1c0a8e7!2z0J_QsNGA0LjQtiwg0JzQvtGB0LrQstCw!5e0!3m2!1sru!2sru!4v1620000000000!5m2!1sru!2sru" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <h3>О компании</h3>
                    <p data-editable="true" data-key="footerAbout">Юридические услуги широкого спектра для физических и юридических лиц. Профессионализм, конфиденциальность, индивидуальный подход.</p>
                </div>
                <div class="footer-col">
                    <h3>Услуги</h3>
                    <ul>
                        <li><a href="#services">Гражданское право</a></li>
                        <li><a href="#services">Семейное право</a></li>
                        <li><a href="#services">Трудовое право</a></li>
                        <li><a href="#services">Налоговое право</a></li>
                        <li><a href="#services">Корпоративное право</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Быстрые ссылки</h3>
                    <ul>
                        <li><a href="#home">Главная</a></li>
                        <li><a href="#about">Обо мне</a></li>
                        <li><a href="#services">Услуги</a></li>
                        <li><a href="#faq">FAQ</a></li>
                        <li><a href="#contact">Контакты</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Контакты</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> <span data-editable="true" data-key="footerAddress">г. Москва, ул. Правовая, д. 15</span></li>
                        <li><i class="fas fa-phone-alt"></i> <span data-editable="true" data-key="footerPhone">+7 (495) 123-45-67</span></li>
                        <li><i class="fas fa-envelope"></i> <span data-editable="true" data-key="footerEmail">info@dobroradnyh-law.ru</span></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="currentYear"></span> Доброрадных Наталия Станиславовна. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Consultation Modal -->
    <div class="modal" id="consultationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Запись на консультацию</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="modalConsultForm">
                    <div class="form-group">
                        <label for="modalName">Ваше имя*</label>
                        <input type="text" id="modalName" name="name" required>
                        <div class="invalid-feedback" id="modalNameError"></div>
                    </div>
                    <div class="form-group">
                        <label for="modalPhone">Телефон*</label>
                        <input type="tel" id="modalPhone" name="phone" required>
                        <div class="invalid-feedback" id="modalPhoneError"></div>
                    </div>
                    <div class="form-group">
                        <label for="modalDate">Желаемая дата</label>
                        <input type="date" id="modalDate" name="date">
                    </div>
                    <div class="form-group">
                        <label for="modalTime">Желаемое время</label>
                        <input type="time" id="modalTime" name="time">
                    </div>
                    <button type="submit" class="btn btn-primary">Записаться</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Личный кабинет</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="auth-tabs">
                    <div class="auth-tab active" data-tab="login">Вход</div>
                    <div class="auth-tab" data-tab="register">Регистрация</div>
                </div>
                
                <div class="auth-content active" id="loginContent">
                    <form class="auth-form" id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" name="email" placeholder="Введите ваш email" required>
                            <div class="invalid-feedback" id="loginEmailError"></div>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Пароль</label>
                            <input type="password" id="loginPassword" name="password" placeholder="Введите пароль" required>
                            <div class="invalid-feedback" id="loginPasswordError"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Войти</button>
                        <div class="form-footer">
                            Нет аккаунта? <a href="#" class="switch-to-register">Зарегистрируйтесь</a>
                        </div>
                    </form>
                </div>
                
                <div class="auth-content" id="registerContent">
                    <form class="auth-form" id="registerForm">
                        <div class="form-group">
                            <label for="regName">Имя</label>
                            <input type="text" id="regName" name="name" placeholder="Ваше полное имя" required>
                            <div class="invalid-feedback" id="regNameError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regEmail">Email</label>
                            <input type="email" id="regEmail" name="email" placeholder="Введите ваш email" required>
                            <div class="invalid-feedback" id="regEmailError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regPhone">Телефон</label>
                            <input type="tel" id="regPhone" name="phone" placeholder="+7 (___) ___-____" required>
                            <div class="invalid-feedback" id="regPhoneError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regPassword">Пароль</label>
                            <input type="password" id="regPassword" name="password" placeholder="Не менее 6 символов" required>
                            <div class="invalid-feedback" id="regPasswordError"></div>
                        </div>
                        <div class="form-group">
                            <label for="regConfirmPassword">Подтвердите пароль</label>
                            <input type="password" id="regConfirmPassword" name="confirmPassword" placeholder="Повторите пароль" required>
                            <div class="invalid-feedback" id="regConfirmPasswordError"></div>
                        </div>
                        <button type="submit" class="btn btn-primary">Зарегистрироваться</button>
                        <div class="form-footer">
                            Уже есть аккаунт? <a href="#" class="switch-to-login">Войдите</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="modal admin-modal" id="adminPanelModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Панель управления сайтом</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="admin-nav">
                    <div class="admin-nav-item active" data-tab="dashboard">Панель управления</div>
                    <div class="admin-nav-item" data-tab="edit-mode">Режим редактирования</div>
                    <div class="admin-nav-item" data-tab="photos">Управление фото</div>
                    <div class="admin-nav-item" data-tab="colors">Цвета разделов</div>
                    <div class="admin-nav-item" id="logoutBtn">Выйти</div>
                </div>
                
                <!-- Dashboard Tab -->
                <div class="admin-tab-content active" id="dashboard">
                    <h2 class="section-title">Общая статистика</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Посетителей сегодня</h3>
                            <div class="value" id="todayVisitors">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Новых заявок</h3>
                            <div class="value" id="newRequests">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Всего заявок</h3>
                            <div class="value" id="totalRequests">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Обработано заявок</h3>
                            <div class="value" id="processedRequests">0</div>
                        </div>
                    </div>
                    
                    <div class="search-bar">
                        <input type="text" id="requestSearch" placeholder="Поиск по имени, телефону или email...">
                        <button id="searchRequestBtn"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <div class="filter-bar">
                        <select id="requestStatusFilter">
                            <option value="">Все статусы</option>
                            <option value="pending">В обработке</option>
                            <option value="processed">Обработана</option>
                            <option value="rejected">Отклонена</option>
                        </select>
                        <select id="requestServiceFilter">
                            <option value="">Все услуги</option>
                            <option value="civil">Гражданское право</option>
                            <option value="family">Семейное право</option>
                            <option value="labor">Трудовое право</option>
                            <option value="tax">Налоговое право</option>
                            <option value="corporate">Корпоративное право</option>
                            <option value="other">Другое</option>
                        </select>
                        <select id="requestDateFilter">
                            <option value="">Все даты</option>
                            <option value="today">Сегодня</option>
                            <option value="week">Эта неделя</option>
                            <option value="month">Этот месяц</option>
                        </select>
                    </div>
                    
                    <div class="table-responsive">
                        <table class="admin-table" id="requestsTable">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Имя</th>
                                    <th>Телефон</th>
                                    <th>Услуга</th>
                                    <th>Дата</th>
                                    <th>Статус</th>
                                    <th>Действия</th>
                                </tr>
                            </thead>
                            <tbody id="requestsTableBody">
                                <!-- Requests will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="pagination" id="requestsPagination">
                        <div class="page-item">
                            <a href="#" class="page-link" id="prevPage">«</a>
                        </div>
                        <div class="page-item active">
                            <a href="#" class="page-link">1</a>
                        </div>
                        <div class="page-item">
                            <a href="#" class="page-link">2</a>
                        </div>
                        <div class="page-item">
                            <a href="#" class="page-link" id="nextPage">»</a>
                        </div>
                    </div>
                </div>
                
                <!-- Edit Mode Tab -->
                <div class="admin-tab-content" id="edit-mode">
                    <h2 class="section-title">Режим редактирования контента</h2>
                    
                    <div class="alert alert-info">
                        <p>В этом режиме вы можете редактировать текстовое содержимое сайта напрямую на страницах.</p>
                        <p>Выберите страницу для редактирования, затем нажмите "Включить режим редактирования". После этого вы сможете кликать на текстовые блоки и редактировать их.</p>
                    </div>
                    
                    <div class="form-group">
                        <label>Выберите страницу для редактирования:</label>
                        <select class="form-control" id="editPageSelect">
                            <option value="">-- Выберите страницу --</option>
                            <option value="home">Главная</option>
                            <option value="about">Обо мне</option>
                            <option value="services">Услуги</option>
                            <option value="faq">FAQ</option>
                            <option value="contact">Контакты</option>
                            <option value="header">Шапка сайта</option>
                            <option value="footer">Подвал сайта</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary" id="enableEditModeBtn">Включить режим редактирования</button>
                </div>
                
                <!-- Photos Tab -->
                <div class="admin-tab-content" id="photos">
                    <h2 class="section-title">Управление фотографиями</h2>
                    
                    <div class="form-group">
                        <label>Выберите тип фотографии для управления:</label>
                        <select class="form-control" id="photoTypeSelect">
                            <option value="">-- Выберите тип --</option>
                            <option value="header-logo">Логотип в шапке</option>
                            <option value="hero-logo">Логотип в герое</option>
                            <option value="hero-photo">Фото в герое</option>
                            <option value="about-photo">Фото в разделе "Обо мне"</option>
                            <option value="documents">Документы и сертификаты</option>
                        </select>
                    </div>
                    
                    <div id="photoManagementContent">
                        <!-- Content will be loaded here based on photo type selection -->
                    </div>
                </div>
                
                <!-- Colors Tab -->
                <div class="admin-tab-content" id="colors">
                    <h2 class="section-title">Настройка цветов разделов</h2>
                    
                    <p>Здесь вы можете изменить цветовую схему различных разделов сайта.</p>
                    
                    <div class="color-picker-container">
                        <div class="color-picker-item">
                            <label class="color-picker-label">Основной цвет (кнопки, акценты):</label>
                            <div class="color-picker">
                                <input type="color" id="primaryColorPicker" value="#247391">
                                <input type="text" id="primaryColorText" value="#247391">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет шапки:</label>
                            <div class="color-picker">
                                <input type="color" id="headerColorPicker" value="#c5edfc">
                                <input type="text" id="headerColorText" value="#c5edfc">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет героя:</label>
                            <div class="color-picker">
                                <input type="color" id="heroColorPicker" value="#247391">
                                <input type="text" id="heroColorText" value="#247391">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет раздела "Обо мне":</label>
                            <div class="color-picker">
                                <input type="color" id="aboutColorPicker" value="#ffffff">
                                <input type="text" id="aboutColorText" value="#ffffff">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет раздела "Услуги":</label>
                            <div class="color-picker">
                                <input type="color" id="servicesColorPicker" value="#c5edfc">
                                <input type="text" id="servicesColorText" value="#c5edfc">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет раздела "FAQ":</label>
                            <div class="color-picker">
                                <input type="color" id="faqColorPicker" value="#ffffff">
                                <input type="text" id="faqColorText" value="#ffffff">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет раздела "Контакты":</label>
                            <div class="color-picker">
                                <input type="color" id="contactColorPicker" value="#c5edfc">
                                <input type="text" id="contactColorText" value="#c5edfc">
                            </div>
                        </div>
                        
                        <div class="color-picker-item">
                            <label class="color-picker-label">Цвет футера:</label>
                            <div class="color-picker">
                                <input type="color" id="footerColorPicker" value="#082c3a">
                                <input type="text" id="footerColorText" value="#082c3a">
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-primary" id="saveColorsBtn" style="margin-top: 20px;">Сохранить цвета</button>
                    <button class="btn btn-secondary" id="resetColorsBtn" style="margin-top: 20px;">Сбросить к стандартным</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Photo Management Modal -->
    <div class="modal" id="photoManagementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="photoModalTitle">Управление фотографиями</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div id="photoManagementForm">
                    <!-- Form will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Request Details Modal -->
    <div class="modal" id="requestDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="requestModalTitle">Детали заявки</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body" id="requestDetailsContent">
                <!-- Content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Content Edit Modal -->
    <div class="modal" id="contentEditModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="contentModalTitle">Редактирование контента</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body" id="contentEditForm">
                <!-- Form will be loaded here -->
            </div>
        </div>
    </div>
    <!-- Chat Button -->
    <div class="chat-button" id="chatButton">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Chat Modal -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <h3>Чат с юристом</h3>
            <span class="chat-close">&times;</span>
        </div>
        <div class="chat-body" id="chatMessages">
            <!-- Messages will appear here -->
            <div class="chat-message chat-message-bot">
                <div class="message-content">
                    Здравствуйте! Чем могу помочь?
                </div>
                <div class="message-time">10:00</div>
            </div>
        </div>
        
        <!-- Video/Audio Call Elements -->
        <div class="video-container" id="videoContainer">
            <video id="remoteVideo" autoplay playsinline></video>
            <video id="localVideo" class="local-video" autoplay playsinline muted></video>
        </div>
        <div class="call-status" id="callStatus"></div>
        
        <div class="call-controls">
            <div class="call-btn video-call-btn" id="videoCallBtn" title="Видеозвонок">
                <i class="fas fa-video"></i>
            </div>
            <div class="call-btn audio-call-btn" id="audioCallBtn" title="Аудиозвонок">
                <i class="fas fa-phone"></i>
            </div>
            <div class="call-btn end-call-btn" id="endCallBtn" title="Завершить звонок" style="display: none;">
                <i class="fas fa-phone-slash"></i>
            </div>
        </div>
        
        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Напишите сообщение...">
            <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Incoming Call Modal (should be outside chat modal) -->
    <div class="incoming-call" id="incomingCallModal">
        <h3>Входящий звонок</h3>
        <p id="incomingCallType">Видеозвонок от юриста</p>
        <div class="incoming-call-buttons">
            <div class="incoming-call-btn accept-call-btn" id="acceptCallBtn">
                <i class="fas fa-phone"></i>
            </div>
            <div class="incoming-call-btn reject-call-btn" id="rejectCallBtn">
                <i class="fas fa-phone-slash"></i>
            </div>
        </div>
    </div>
    <!-- телефон -->
    <!-- Обновите чат-модалку -->
    <div class="chat-modal" id="chatModal">
        <div class="chat-header">
            <h3>Чат с юристом</h3>
            <span class="chat-close">&times;</span>
        </div>
        <div class="chat-body" id="chatMessages">
            <!-- Messages will appear here -->
            <div class="chat-message chat-message-bot">
                <div class="message-content">
                    Здравствуйте! Чем могу помочь?
                </div>
                <div class="message-time">10:00</div>
            </div>
        </div>
        
        <!-- Video/Audio Call Elements -->
        <div class="video-container" id="videoContainer">
            <video id="remoteVideo" autoplay playsinline></video>
            <video id="localVideo" class="local-video" autoplay playsinline muted></video>
        </div>
        <div class="call-status" id="callStatus"></div>
        
        <div class="call-controls">
            <div class="call-btn video-call-btn" id="videoCallBtn" title="Видеозвонок">
                <i class="fas fa-video"></i>
            </div>
            <div class="call-btn audio-call-btn" id="audioCallBtn" title="Аудиозвонок">
                <i class="fas fa-phone"></i>
            </div>
            <div class="call-btn end-call-btn" id="endCallBtn" title="Завершить звонок" style="display: none;">
                <i class="fas fa-phone-slash"></i>
            </div>
        </div>
        
        <div class="chat-footer">
            <input type="text" id="chatInput" placeholder="Напишите сообщение...">
            <button id="sendMessageBtn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <!-- Incoming Call Modal -->
    <div class="incoming-call" id="incomingCallModal">
        <h3>Входящий звонок</h3>
        <p id="incomingCallType">Видеозвонок от юриста</p>
        <div class="incoming-call-buttons">
            <div class="incoming-call-btn accept-call-btn" id="acceptCallBtn">
                <i class="fas fa-phone"></i>
            </div>
            <div class="incoming-call-btn reject-call-btn" id="rejectCallBtn">
                <i class="fas fa-phone-slash"></i>
            </div>
        </div>
    </div>
<script>
    // Chat and Call functionality
    document.addEventListener('DOMContentLoaded', function() {
        const chatButton = document.getElementById('chatButton');
        const chatModal = document.getElementById('chatModal');
        const chatClose = document.querySelector('.chat-close');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatMessages = document.getElementById('chatMessages');
        
        // Call elements
        const videoCallBtn = document.getElementById('videoCallBtn');
        const audioCallBtn = document.getElementById('audioCallBtn');
        const endCallBtn = document.getElementById('endCallBtn');
        const videoContainer = document.getElementById('videoContainer');
        const remoteVideo = document.getElementById('remoteVideo');
        const localVideo = document.getElementById('localVideo');
        const callStatus = document.getElementById('callStatus');
        const incomingCallModal = document.getElementById('incomingCallModal');
        const acceptCallBtn = document.getElementById('acceptCallBtn');
        const rejectCallBtn = document.getElementById('rejectCallBtn');
        const incomingCallType = document.getElementById('incomingCallType');
        
        let peerConnection;
        let localStream;
        let currentCallType = null; // 'video' or 'audio'
        let callActive = false;
        
        // Open chat modal
        chatButton.addEventListener('click', function() {
            chatModal.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        });

        // Close chat modal
        chatClose.addEventListener('click', function() {
            chatModal.style.display = 'none';
            if (callActive) {
                endCall();
            }
        });

        // Send message on button click
        sendMessageBtn.addEventListener('click', sendMessage);

        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Video call button
        videoCallBtn.addEventListener('click', function() {
            if (!callActive) {
                startCall('video');
            }
        });

        // Audio call button
        audioCallBtn.addEventListener('click', function() {
            if (!callActive) {
                startCall('audio');
            }
        });

        // End call button
        endCallBtn.addEventListener('click', endCall);

        // Accept incoming call
        acceptCallBtn.addEventListener('click', function() {
            acceptIncomingCall();
        });

        // Reject incoming call
        rejectCallBtn.addEventListener('click', function() {
            rejectIncomingCall();
        });

        function sendMessage() {
            const messageText = chatInput.value.trim();
            if (messageText) {
                // Add user message
                addMessage(messageText, 'user');
                chatInput.value = '';
                
                // Simulate bot reply after a short delay
                setTimeout(() => {
                    const replies = [
                        "Спасибо за ваше сообщение. Как я могу вам помочь?",
                        "Я передал ваш вопрос юристу и скоро вам ответят.",
                        "Вы можете записаться на консультацию через форму на сайте.",
                        "Наш специалист скоро свяжется с вами.",
                        "Уточните, пожалуйста, ваш вопрос для более точного ответа."
                    ];
                    const randomReply = replies[Math.floor(Math.random() * replies.length)];
                    addMessage(randomReply, 'bot');
                }, 1000 + Math.random() * 2000);
            }
        }

        function addMessage(text, sender) {
            const now = new Date();
            const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message chat-message-${sender}`;
            messageDiv.innerHTML = `
                <div class="message-content">${text}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Call functions
        async function startCall(type) {
            try {
                currentCallType = type;
                callStatus.textContent = 'Установка соединения...';
                callStatus.style.display = 'block';
                
                // Get user media
                const constraints = {
                    audio: true,
                    video: type === 'video' ? true : false
                };
                
                localStream = await navigator.mediaDevices.getUserMedia(constraints);
                
                if (type === 'video') {
                    videoContainer.style.display = 'block';
                    localVideo.srcObject = localStream;
                }
                
                // Simulate call establishment (in a real app, you would use WebRTC here)
                setTimeout(() => {
                    callActive = true;
                    callStatus.textContent = 'Звонок активен';
                    endCallBtn.style.display = 'flex';
                    videoCallBtn.style.display = 'none';
                    audioCallBtn.style.display = 'none';
                    
                    // Simulate receiving remote stream after 1 second
                    setTimeout(() => {
                        if (type === 'video') {
                            // In a real app, you would set remoteVideo.srcObject to the remote stream
                            callStatus.textContent = 'Видеозвонок активен';
                        } else {
                            callStatus.textContent = 'Аудиозвонок активен';
                        }
                        
                        // Simulate incoming message during call
                        setTimeout(() => {
                            addMessage("Я вас хорошо слышу. Какой у вас вопрос?", 'bot');
                        }, 2000);
                    }, 1000);
                }, 1500);
                
                // Simulate incoming call notification for demo purposes
                // In a real app, this would come from a signaling server
                simulateIncomingCall();
                
            } catch (error) {
                console.error('Error starting call:', error);
                callStatus.textContent = 'Ошибка: ' + error.message;
                setTimeout(() => {
                    callStatus.style.display = 'none';
                }, 3000);
            }
        }

        function endCall() {
            if (localStream) {
                localStream.getTracks().forEach(track => track.stop());
            }
            
            if (remoteVideo.srcObject) {
                remoteVideo.srcObject.getTracks().forEach(track => track.stop());
            }
            
            callActive = false;
            videoContainer.style.display = 'none';
            callStatus.style.display = 'none';
            endCallBtn.style.display = 'none';
            videoCallBtn.style.display = 'flex';
            audioCallBtn.style.display = 'flex';
            
            // Add call ended message
            addMessage("Звонок завершен", 'bot');
        }

        function simulateIncomingCall() {
            // In a real app, this would be triggered by a signaling server
            setTimeout(() => {
                incomingCallType.textContent = currentCallType === 'video' ? 
                    'Видеозвонок от юриста' : 'Аудиозвонок от юриста';
                incomingCallModal.style.display = 'block';
                
                // Auto-reject after 30 seconds if not answered
                setTimeout(() => {
                    if (incomingCallModal.style.display === 'block') {
                        rejectIncomingCall();
                    }
                }, 30000);
            }, 2000);
        }

        function acceptIncomingCall() {
            incomingCallModal.style.display = 'none';
            
            if (currentCallType === 'video') {
                videoContainer.style.display = 'block';
                // In a real app, you would set remoteVideo.srcObject to the remote stream
                callStatus.textContent = 'Видеозвонок активен';
            } else {
                callStatus.textContent = 'Аудиозвонок активен';
            }
            
            callStatus.style.display = 'block';
            callActive = true;
            endCallBtn.style.display = 'flex';
            videoCallBtn.style.display = 'none';
            audioCallBtn.style.display = 'none';
            
            // Add call accepted message
            addMessage("Вы подключились к звонку", 'bot');
        }

        function rejectIncomingCall() {
            incomingCallModal.style.display = 'none';
            
            // Add call rejected message
            addMessage("Звонок отклонен", 'bot');
            
            if (!callActive) {
                endCall();
            }
        }

        // Close chat when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === chatModal) {
                chatModal.style.display = 'none';
                if (callActive) {
                    endCall();
                }
            }
        });
    });
</script>
    <script>
        // Current user state
        let currentUser = null;
        let editMode = false;
        let currentlyEditedElement = null;
        let currentPage = 1;
        const itemsPerPage = 10;
        
        // Site settings
        let siteSettings = {
            title: "Доброрадных Наталия Станиславовна | Юридические услуги",
            logo: "logo.png",
            heroLogo: "logo1.png",
            heroPhoto: "фото на баннер пнг.png",
            aboutPhoto: "lawyer-photo.jpg",
            primaryColor: "#247391",
            headerColor: "#c5edfc",
            heroColor: "#247391",
            aboutColor: "#ffffff",
            servicesColor: "#c5edfc",
            faqColor: "#ffffff",
            contactColor: "#c5edfc",
            footerColor: "#082c3a",
            contactPhone: "+7 (495) 123-45-67",
            contactEmail: "info@dobroradnyh-law.ru",
            contactAddress: "г. Москва, ул. Правовая, д. 15, офис 305",
            workingHours: "Пн-Пт: 9:00 - 18:00\nСб: 10:00 - 15:00\nВс: выходной",
            telegramLink: "https://t.me/dobroradnyh_law",
            whatsappLink: "https://wa.me/74951234567",
            vkLink: "https://vk.com/dobroradnyh_law",
            metaDescription: "Профессиональные юридические услуги в Москве. Гражданское, семейное, налоговое и корпоративное право. Консультации, сопровождение сделок, представительство в суде.",
            metaKeywords: "юрист, юридические услуги, адвокат, консультация юриста, семейное право, гражданское право",
            documents: []
        };
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            loadContent();
            setupEventListeners();
            checkAuth();
            loadSiteSettings();
            
            // Set current year in footer
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Initialize dashboard if needed
            if (document.getElementById('dashboard').classList.contains('active')) {
                initDashboard();
            }
        });
        
        // Load saved content from localStorage
        function loadContent() {
            // Load site content
            const savedContent = localStorage.getItem('siteContent');
            if (savedContent) {
                const content = JSON.parse(savedContent);
                
                // Apply saved content to all editable elements
                document.querySelectorAll('[data-editable="true"]').forEach(element => {
                    const key = element.getAttribute('data-key');
                    if (content[key]) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.value = content[key];
                        } else {
                            element.innerHTML = content[key];
                        }
                    }
                });
            }
            
            // Load photos
            const savedPhotos = localStorage.getItem('sitePhotos');
            if (savedPhotos) {
                const photos = JSON.parse(savedPhotos);
                siteSettings.documents = photos.documents || [];
                
                // Update photo elements
                if (photos.logo) {
                    document.getElementById('headerLogo').src = photos.logo;
                    siteSettings.logo = photos.logo;
                }
                if (photos.heroLogo) {
                    document.getElementById('heroLogo').src = photos.heroLogo;
                    siteSettings.heroLogo = photos.heroLogo;
                }
                if (photos.heroPhoto) {
                    document.getElementById('heroPhoto').src = photos.heroPhoto;
                    siteSettings.heroPhoto = photos.heroPhoto;
                }
                if (photos.aboutPhoto) {
                    document.getElementById('aboutPhoto').src = photos.aboutPhoto;
                    siteSettings.aboutPhoto = photos.aboutPhoto;
                }
            }
        }
        
        // Load site settings from localStorage
        function loadSiteSettings() {
            const savedSettings = localStorage.getItem('siteSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                siteSettings = {...siteSettings, ...settings};
                
                // Apply colors to the site
                applyColors();
            }
        }
        
        // Apply colors to the site
        function applyColors() {
            document.documentElement.style.setProperty('--primary-color', siteSettings.primaryColor);
            document.documentElement.style.setProperty('--header-color', siteSettings.headerColor);
            document.documentElement.style.setProperty('--hero-color', siteSettings.heroColor);
            document.documentElement.style.setProperty('--about-color', siteSettings.aboutColor);
            document.documentElement.style.setProperty('--services-color', siteSettings.servicesColor);
            document.documentElement.style.setProperty('--faq-color', siteSettings.faqColor);
            document.documentElement.style.setProperty('--contact-color', siteSettings.contactColor);
            document.documentElement.style.setProperty('--footer-color', siteSettings.footerColor);
            
            // Update color pickers if they exist
            if (document.getElementById('primaryColorPicker')) {
                document.getElementById('primaryColorPicker').value = siteSettings.primaryColor;
                document.getElementById('primaryColorText').value = siteSettings.primaryColor;
                document.getElementById('headerColorPicker').value = siteSettings.headerColor;
                document.getElementById('headerColorText').value = siteSettings.headerColor;
                document.getElementById('heroColorPicker').value = siteSettings.heroColor;
                document.getElementById('heroColorText').value = siteSettings.heroColor;
                document.getElementById('aboutColorPicker').value = siteSettings.aboutColor;
                document.getElementById('aboutColorText').value = siteSettings.aboutColor;
                document.getElementById('servicesColorPicker').value = siteSettings.servicesColor;
                document.getElementById('servicesColorText').value = siteSettings.servicesColor;
                document.getElementById('faqColorPicker').value = siteSettings.faqColor;
                document.getElementById('faqColorText').value = siteSettings.faqColor;
                document.getElementById('contactColorPicker').value = siteSettings.contactColor;
                document.getElementById('contactColorText').value = siteSettings.contactColor;
                document.getElementById('footerColorPicker').value = siteSettings.footerColor;
                document.getElementById('footerColorText').value = siteSettings.footerColor;
            }
            
            // Update section backgrounds
            document.querySelector('.hero').style.backgroundColor = siteSettings.heroColor;
            document.querySelector('.services').style.backgroundColor = siteSettings.servicesColor;
            document.querySelector('.contact').style.backgroundColor = siteSettings.contactColor;
            document.querySelector('footer').style.backgroundColor = siteSettings.footerColor;
        }
        
        // Save content to localStorage
        function saveContent() {
            const content = {};
            
            document.querySelectorAll('[data-editable="true"]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    content[key] = element.value;
                } else {
                    content[key] = element.innerHTML;
                }
            });
            
            localStorage.setItem('siteContent', JSON.stringify(content));
            showNotification('Текстовые изменения сохранены!', 'success');
        }
        
        // Save photos to localStorage
        function savePhotos() {
            const photos = {
                logo: siteSettings.logo,
                heroLogo: siteSettings.heroLogo,
                heroPhoto: siteSettings.heroPhoto,
                aboutPhoto: siteSettings.aboutPhoto,
                documents: siteSettings.documents
            };
            
            localStorage.setItem('sitePhotos', JSON.stringify(photos));
            showNotification('Фотографии сохранены!', 'success');
        }
        
        // Save colors to localStorage
        function saveColors() {
            siteSettings.primaryColor = document.getElementById('primaryColorPicker').value;
            siteSettings.headerColor = document.getElementById('headerColorPicker').value;
            siteSettings.heroColor = document.getElementById('heroColorPicker').value;
            siteSettings.aboutColor = document.getElementById('aboutColorPicker').value;
            siteSettings.servicesColor = document.getElementById('servicesColorPicker').value;
            siteSettings.faqColor = document.getElementById('faqColorPicker').value;
            siteSettings.contactColor = document.getElementById('contactColorPicker').value;
            siteSettings.footerColor = document.getElementById('footerColorPicker').value;
            
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            applyColors();
            showNotification('Цвета сохранены!', 'success');
        }
        
        // Reset colors to default
        function resetColors() {
            siteSettings.primaryColor = "#247391";
            siteSettings.headerColor = "#c5edfc";
            siteSettings.heroColor = "#247391";
            siteSettings.aboutColor = "#ffffff";
            siteSettings.servicesColor = "#c5edfc";
            siteSettings.faqColor = "#ffffff";
            siteSettings.contactColor = "#c5edfc";
            siteSettings.footerColor = "#082c3a";
            
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            applyColors();
            showNotification('Цвета сброшены к стандартным!', 'success');
        }
        
        // Save site settings
        function saveSiteSettings() {
            siteSettings.title = document.getElementById('siteTitle').value;
            siteSettings.metaDescription = document.getElementById('siteDescription').value;
            siteSettings.metaKeywords = document.getElementById('siteKeywords').value;
            siteSettings.contactPhone = document.getElementById('sitePhone').value;
            siteSettings.contactEmail = document.getElementById('siteEmail').value;
            siteSettings.contactAddress = document.getElementById('siteAddress').value;
            siteSettings.workingHours = document.getElementById('siteWorkingHours').value;
            siteSettings.telegramLink = document.getElementById('siteTelegram').value;
            siteSettings.whatsappLink = document.getElementById('siteWhatsApp').value;
            siteSettings.vkLink = document.getElementById('siteVK').value;
            
            // Update document title
            document.title = siteSettings.title;
            
            // Update contact info on the page
            document.querySelector('[data-key="contactPhone"]').textContent = siteSettings.contactPhone;
            document.querySelector('[data-key="contactEmail"]').textContent = siteSettings.contactEmail;
            document.querySelector('[data-key="contactAddress"]').textContent = siteSettings.contactAddress;
            document.querySelector('[data-key="contactHours"]').textContent = siteSettings.workingHours;
            document.querySelector('[data-key="footerPhone"]').textContent = siteSettings.contactPhone;
            document.querySelector('[data-key="footerEmail"]').textContent = siteSettings.contactEmail;
            document.querySelector('[data-key="footerAddress"]').textContent = siteSettings.contactAddress;
            
            localStorage.setItem('siteSettings', JSON.stringify(siteSettings));
            showNotification('Настройки сайта сохранены!', 'success');
        }
        
        // Setup all event listeners
        function setupEventListeners() {
            // Mobile Menu Toggle
            document.querySelector('.mobile-menu').addEventListener('click', function() {
                document.querySelector('.nav-links').classList.toggle('active');
                this.querySelector('i').classList.toggle('fa-bars');
                this.querySelector('i').classList.toggle('fa-times');
            });

            // Smooth Scrolling for Anchor Links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;
                    
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        // Close mobile menu if open
                        document.querySelector('.nav-links').classList.remove('active');
                        document.querySelector('.mobile-menu i').classList.remove('fa-times');
                        document.querySelector('.mobile-menu i').classList.add('fa-bars');
                    }
                });
            });

            // Tab Switching
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons and contents
                    tabBtns.forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked button and corresponding content
                    btn.classList.add('active');
                    const tabId = btn.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // FAQ Accordion
            const faqQuestions = document.querySelectorAll('.faq-question');
            faqQuestions.forEach(question => {
                question.addEventListener('click', () => {
                    const item = question.parentElement;
                    const answer = item.querySelector('.faq-answer');
                    
                    // Close all other items
                    document.querySelectorAll('.faq-item').forEach(faqItem => {
                        if (faqItem !== item) {
                            faqItem.querySelector('.faq-question').classList.remove('active');
                            faqItem.querySelector('.faq-answer').classList.remove('active');
                        }
                    });
                    
                    // Toggle current item
                    question.classList.toggle('active');
                    answer.classList.toggle('active');
                });
            });

            // Floating CTA
            document.getElementById('floating-cta').addEventListener('click', () => {
                document.getElementById('consultationModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
            });

            // Modal Close
            document.querySelectorAll('.close-modal').forEach(closeBtn => {
                closeBtn.addEventListener('click', function() {
                    this.closest('.modal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                });
            });

            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('modal')) {
                    e.target.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });

            // Form Submission
            document.getElementById('consultForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateConsultForm(this)) {
                    saveConsultationRequest(this);
                    this.reset();
                    showNotification('Ваша заявка отправлена! Мы свяжемся с вами в ближайшее время.', 'success');
                }
            });

            document.getElementById('modalConsultForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateConsultForm(this)) {
                    saveConsultationRequest(this);
                    this.reset();
                    document.getElementById('consultationModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    showNotification('Вы успешно записаны на консультацию! Мы свяжемся с вами для подтверждения.', 'success');
                }
            });

            // Auth Tabs
            const authTabs = document.querySelectorAll('.auth-tab');
            authTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    authTabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.auth-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    const tabId = tab.getAttribute('data-tab');
                    document.getElementById(`${tabId}Content`).classList.add('active');
                });
            });

            // Personal Account Button
            document.getElementById('personalAccountBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('authModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
            });

            // Login Form
            document.getElementById('loginForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateLoginForm(this)) {
                    const email = this.email.value;
                    const password = this.password.value;
                    
                    // Check credentials
                    if ((email === 'admin@example.com' && password === 'admin123') || 
                        (email === 'dev@example.com' && password === 'dev123')) {
                        
                        currentUser = {
                            email: email,
                            role: email === 'admin@example.com' ? 'admin' : 'developer'
                        };
                        
                        showNotification(`Вы вошли как ${currentUser.role === 'admin' ? 'администратор' : 'разработчик'}`, 'success');
                        document.getElementById('authModal').style.display = 'none';
                        document.body.style.overflow = 'auto';
                        
                        // Show admin panel toggle
                        document.getElementById('adminToggleBtn').style.display = 'flex';
                        
                        // Save user session
                        localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    } else {
                        showNotification('Неверный email или пароль', 'error');
                    }
                }
            });

            // Register Form
            document.getElementById('registerForm')?.addEventListener('submit', function(e) {
                e.preventDefault();
                if (validateRegisterForm(this)) {
                    const password = this.password.value;
                    const confirmPassword = this.confirmPassword.value;
                    
                    if (password !== confirmPassword) {
                        showNotification('Пароли не совпадают', 'error');
                        return;
                    }
                    
                    showNotification('Регистрация прошла успешно! Теперь вы можете войти в личный кабинет.', 'success');
                    // Switch to login tab
                    document.querySelector('.auth-tab[data-tab="login"]').click();
                    this.reset();
                }
            });

            // Logout
            document.getElementById('logoutBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                currentUser = null;
                localStorage.removeItem('currentUser');
                document.getElementById('adminPanelModal').style.display = 'none';
                document.getElementById('adminToggleBtn').style.display = 'none';
                
                // Exit edit mode if active
                if (editMode) {
                    toggleEditMode();
                }
                
                showNotification('Вы вышли из системы', 'success');
            });

            // Admin Panel Toggle
            document.getElementById('adminToggleBtn')?.addEventListener('click', function() {
                document.getElementById('adminPanelModal').style.display = 'block';
                document.body.style.overflow = 'hidden';
            });

            // Admin Nav Tabs
            const adminNavItems = document.querySelectorAll('.admin-nav-item');
            adminNavItems.forEach(item => {
                item.addEventListener('click', function() {
                    if (this.id === 'logoutBtn') return;
                    
                    // Remove active class from all nav items
                    adminNavItems.forEach(navItem => navItem.classList.remove('active'));
                    
                    // Add active class to clicked nav item
                    this.classList.add('active');
                    
                    // Hide all tab contents
                    document.querySelectorAll('.admin-tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Show corresponding tab content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                    
                    // Load specific content if needed
                    if (tabId === 'dashboard') {
                        initDashboard();
                    }
                });
            });

            // Enable Edit Mode Button
            document.getElementById('enableEditModeBtn')?.addEventListener('click', function() {
                toggleEditMode();
            });

            // Save Colors Button
            document.getElementById('saveColorsBtn')?.addEventListener('click', function() {
                saveColors();
            });

            // Reset Colors Button
            document.getElementById('resetColorsBtn')?.addEventListener('click', function() {
                resetColors();
            });

            // Back to Top Button
            window.addEventListener('scroll', function() {
                const backToTop = document.getElementById('backToTop');
                if (window.pageYOffset > 300) {
                    backToTop.classList.add('active');
                } else {
                    backToTop.classList.remove('active');
                }
            });

            document.getElementById('backToTop')?.addEventListener('click', function() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // Photo Type Select Change
            document.getElementById('photoTypeSelect')?.addEventListener('change', function() {
                const photoType = this.value;
                if (!photoType) return;
                
                const contentDiv = document.getElementById('photoManagementContent');
                contentDiv.innerHTML = '';
                
                if (photoType === 'header-logo' || photoType === 'hero-logo' || photoType === 'hero-photo' || photoType === 'about-photo') {
                    const currentPhoto = photoType === 'header-logo' ? siteSettings.logo : 
                                        photoType === 'hero-logo' ? siteSettings.heroLogo : 
                                        photoType === 'hero-photo' ? siteSettings.heroPhoto : 
                                        siteSettings.aboutPhoto;
                    
                    contentDiv.innerHTML = `
                        <div class="current-photo-container">
                            <h4>Текущее изображение:</h4>
                            <img src="${currentPhoto}" alt="Current ${photoType}" style="max-width: 200px; max-height: 200px; margin: 15px 0;">
                        </div>
                        <div class="form-group">
                            <label>Загрузить новое изображение:</label>
                            <div class="file-upload">
                                <input type="file" id="newPhotoUpload" accept="image/*">
                                <label for="newPhotoUpload" class="file-upload-label">
                                    <i class="fas fa-upload"></i> Выбрать файл
                                </label>
                            </div>
                            <div id="photoPreview" style="margin-top: 15px;"></div>
                        </div>
                        <button class="btn btn-primary" id="savePhotoBtn">Сохранить изображение</button>
                    `;
                    
                    // Setup event listeners for the new elements
                    document.getElementById('newPhotoUpload').addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                const previewDiv = document.getElementById('photoPreview');
                                previewDiv.innerHTML = `
                                    <h4>Предпросмотр:</h4>
                                    <img src="${event.target.result}" alt="Preview" style="max-width: 200px; max-height: 200px;">
                                `;
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    
                    document.getElementById('savePhotoBtn').addEventListener('click', function() {
                        const fileInput = document.getElementById('newPhotoUpload');
                        if (fileInput.files.length > 0) {
                            const file = fileInput.files[0];
                            const reader = new FileReader();
                            reader.onload = function(event) {
                                const photoUrl = event.target.result;
                                
                                // Update the appropriate photo setting
                                if (photoType === 'header-logo') {
                                    siteSettings.logo = photoUrl;
                                    document.getElementById('headerLogo').src = photoUrl;
                                } else if (photoType === 'hero-logo') {
                                    siteSettings.heroLogo = photoUrl;
                                    document.getElementById('heroLogo').src = photoUrl;
                                } else if (photoType === 'hero-photo') {
                                    siteSettings.heroPhoto = photoUrl;
                                    document.getElementById('heroPhoto').src = photoUrl;
                                } else if (photoType === 'about-photo') {
                                    siteSettings.aboutPhoto = photoUrl;
                                    document.getElementById('aboutPhoto').src = photoUrl;
                                }
                                
                                savePhotos();
                                document.getElementById('photoPreview').innerHTML = '';
                                fileInput.value = '';
                            };
                            reader.readAsDataURL(file);
                        } else {
                            showNotification('Пожалуйста, выберите файл для загрузки', 'error');
                        }
                    });
                } else if (photoType === 'documents') {
                    contentDiv.innerHTML = `
                        <div class="documents-list">
                            <h4>Текущие документы:</h4>
                            <div id="documentsContainer" style="margin-top: 15px;">
                                ${siteSettings.documents.length > 0 ? 
                                    siteSettings.documents.map(doc => `
                                        <div class="document-item" style="margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                                <span>${doc.name}</span>
                                                <button class="btn btn-danger delete-document" data-id="${doc.id}" style="padding: 5px 10px; font-size: 12px;">
                                                    <i class="fas fa-trash"></i> Удалить
                                                </button>
                                            </div>
                                        </div>
                                    `).join('') : 
                                    '<p>Нет загруженных документов</p>'}
                            </div>
                        </div>
                        <div class="form-group" style="margin-top: 20px;">
                            <label>Добавить новый документ:</label>
                            <div class="file-upload">
                                <input type="file" id="newDocumentUpload">
                                <label for="newDocumentUpload" class="file-upload-label">
                                    <i class="fas fa-upload"></i> Выбрать файл
                                </label>
                            </div>
                            <div class="form-group" style="margin-top: 10px;">
                                <label for="documentName">Название документа:</label>
                                <input type="text" id="documentName" class="form-control">
                            </div>
                        </div>
                        <button class="btn btn-primary" id="addDocumentBtn">Добавить документ</button>
                    `;
                    
                    // Setup event listeners for document management
                    document.getElementById('addDocumentBtn').addEventListener('click', function() {
                        const fileInput = document.getElementById('newDocumentUpload');
                        const docName = document.getElementById('documentName').value;
                        
                        if (fileInput.files.length === 0) {
                            showNotification('Пожалуйста, выберите файл', 'error');
                            return;
                        }
                        
                        if (!docName) {
                            showNotification('Пожалуйста, укажите название документа', 'error');
                            return;
                        }
                        
                        const file = fileInput.files[0];
                        const reader = new FileReader();
                        reader.onload = function(event) {
                            const newDoc = {
                                id: Date.now(),
                                name: docName,
                                file: event.target.result
                            };
                            
                            siteSettings.documents.push(newDoc);
                            savePhotos();
                            
                            // Update the documents list
                            const docItem = document.createElement('div');
                            docItem.className = 'document-item';
                            docItem.style = 'margin-bottom: 15px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;';
                            docItem.innerHTML = `
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>${newDoc.name}</span>
                                    <button class="btn btn-danger delete-document" data-id="${newDoc.id}" style="padding: 5px 10px; font-size: 12px;">
                                        <i class="fas fa-trash"></i> Удалить
                                    </button>
                                </div>
                            `;
                            
                            document.getElementById('documentsContainer').appendChild(docItem);
                            fileInput.value = '';
                            document.getElementById('documentName').value = '';
                            
                            // Add event listener to the new delete button
                            docItem.querySelector('.delete-document').addEventListener('click', function() {
                                deleteDocument(newDoc.id);
                            });
                        };
                        reader.readAsDataURL(file);
                    });
                    
                    // Add event listeners to existing delete buttons
                    document.querySelectorAll('.delete-document').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const docId = parseInt(this.getAttribute('data-id'));
                            deleteDocument(docId);
                        });
                    });
                }
            });

            // Color Picker Sync
            document.querySelectorAll('input[type="color"]').forEach(picker => {
                picker.addEventListener('input', function() {
                    const textInput = document.getElementById(`${this.id.replace('Picker', 'Text')}`);
                    textInput.value = this.value;
                });
            });

            document.querySelectorAll('input[type="text"][id$="Text"]').forEach(textInput => {
                textInput.addEventListener('input', function() {
                    const picker = document.getElementById(`${this.id.replace('Text', 'Picker')}`);
                    if (this.value.match(/^#[0-9A-F]{6}$/i)) {
                        picker.value = this.value;
                    }
                });
            });

            // Request Search
            document.getElementById('searchRequestBtn')?.addEventListener('click', function() {
                const searchTerm = document.getElementById('requestSearch').value.toLowerCase();
                filterRequests();
            });

            // Request Filters
            document.getElementById('requestStatusFilter')?.addEventListener('change', filterRequests);
            document.getElementById('requestServiceFilter')?.addEventListener('change', filterRequests);
            document.getElementById('requestDateFilter')?.addEventListener('change', filterRequests);

            // Pagination
            document.getElementById('prevPage')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    filterRequests();
                }
            });

            document.getElementById('nextPage')?.addEventListener('click', function(e) {
                e.preventDefault();
                currentPage++;
                filterRequests();
            });

            // Editor Toolbar Buttons
            document.querySelectorAll('.editor-toolbar button[data-command]').forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const command = this.getAttribute('data-command');
                    
                    if (command === 'createLink') {
                        const url = prompt('Введите URL:');
                        if (url) {
                            document.execCommand(command, false, url);
                        }
                    } else {
                        document.execCommand(command, false, null);
                    }
                    
                    // Update button active state
                    if (command === 'bold' || command === 'italic' || command === 'underline') {
                        this.classList.toggle('active');
                    }
                });
            });

            // Font Family Change
            document.getElementById('fontFamily')?.addEventListener('change', function() {
                document.execCommand('fontName', false, this.value);
            });

            // Font Size Change
            document.getElementById('fontSize')?.addEventListener('change', function() {
                document.execCommand('fontSize', false, this.value);
            });

            // Save Edit Button
            document.getElementById('saveEditBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                if (currentlyEditedElement) {
                    currentlyEditedElement.innerHTML = currentlyEditedElement.innerHTML;
                    saveContent();
                    toggleEditMode();
                }
            });

            // Cancel Edit Button
            document.getElementById('cancelEditBtn')?.addEventListener('click', function(e) {
                e.preventDefault();
                toggleEditMode();
            });
        }

        // Initialize Dashboard
        function initDashboard() {
            // Load requests from localStorage
            const savedRequests = localStorage.getItem('consultationRequests');
            const requests = savedRequests ? JSON.parse(savedRequests) : [];
            
            // Update stats
            document.getElementById('todayVisitors').textContent = Math.floor(Math.random() * 50) + 20;
            document.getElementById('newRequests').textContent = requests.filter(r => r.status === 'pending').length;
            document.getElementById('totalRequests').textContent = requests.length;
            document.getElementById('processedRequests').textContent = requests.filter(r => r.status === 'processed').length;
            
            // Filter and display requests
            filterRequests();
        }

        // Filter and display requests
        function filterRequests() {
            const savedRequests = localStorage.getItem('consultationRequests');
            const allRequests = savedRequests ? JSON.parse(savedRequests) : [];
            
            // Apply filters
            let filteredRequests = [...allRequests];
            
            // Search term filter
            const searchTerm = document.getElementById('requestSearch').value.toLowerCase();
            if (searchTerm) {
                filteredRequests = filteredRequests.filter(request => 
                    request.name.toLowerCase().includes(searchTerm) || 
                    request.phone.toLowerCase().includes(searchTerm) || 
                    (request.email && request.email.toLowerCase().includes(searchTerm))
                );
            }
            
            // Status filter
            const statusFilter = document.getElementById('requestStatusFilter').value;
            if (statusFilter) {
                filteredRequests = filteredRequests.filter(request => request.status === statusFilter);
            }
            
            // Service filter
            const serviceFilter = document.getElementById('requestServiceFilter').value;
            if (serviceFilter) {
                filteredRequests = filteredRequests.filter(request => request.service === serviceFilter);
            }
            
            // Date filter
            const dateFilter = document.getElementById('requestDateFilter').value;
            if (dateFilter) {
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                filteredRequests = filteredRequests.filter(request => {
                    const requestDate = new Date(request.date);
                    
                    if (dateFilter === 'today') {
                        return requestDate >= today;
                    } else if (dateFilter === 'week') {
                        const weekAgo = new Date(today);
                        weekAgo.setDate(today.getDate() - 7);
                        return requestDate >= weekAgo;
                    } else if (dateFilter === 'month') {
                        const monthAgo = new Date(today);
                        monthAgo.setMonth(today.getMonth() - 1);
                        return requestDate >= monthAgo;
                    }
                    return true;
                });
            }
            
            // Pagination
            const totalPages = Math.ceil(filteredRequests.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const paginatedRequests = filteredRequests.slice(startIndex, startIndex + itemsPerPage);
            
            // Update table
            const tbody = document.getElementById('requestsTableBody');
            tbody.innerHTML = '';
            
            if (paginatedRequests.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center;">Нет данных для отображения</td></tr>';
            } else {
                paginatedRequests.forEach(request => {
                    const row = document.createElement('tr');
                    
                    // Format date
                    const requestDate = new Date(request.date);
                    const formattedDate = requestDate.toLocaleDateString('ru-RU', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });
                    
                    // Format service
                    const serviceNames = {
                        'civil': 'Гражданское право',
                        'family': 'Семейное право',
                        'labor': 'Трудовое право',
                        'tax': 'Налоговое право',
                        'corporate': 'Корпоративное право',
                        'other': 'Другое'
                    };
                    const serviceName = serviceNames[request.service] || request.service;
                    
                    // Status badge
                    let statusBadge = '';
                    if (request.status === 'pending') {
                        statusBadge = '<span class="badge badge-warning">В обработке</span>';
                    } else if (request.status === 'processed') {
                        statusBadge = '<span class="badge badge-success">Обработана</span>';
                    } else if (request.status === 'rejected') {
                        statusBadge = '<span class="badge badge-danger">Отклонена</span>';
                    }
                    
                    row.innerHTML = `
                        <td>${request.id}</td>
                        <td>${request.name}</td>
                        <td>${request.phone}</td>
                        <td>${serviceName}</td>
                        <td>${formattedDate}</td>
                        <td>${statusBadge}</td>
                        <td>
                            <div class="action-btns">
                                <button class="action-btn view-btn" data-id="${request.id}" title="Просмотр">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="action-btn edit-btn" data-id="${request.id}" title="Редактировать">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete-btn" data-id="${request.id}" title="Удалить">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    `;
                    
                    tbody.appendChild(row);
                });
            }
            
            // Update pagination controls
            const pagination = document.getElementById('requestsPagination');
            pagination.innerHTML = '';
            
            if (totalPages > 1) {
                // Previous button
                const prevLi = document.createElement('div');
                prevLi.className = 'page-item';
                prevLi.innerHTML = `<a href="#" class="page-link" id="prevPage">«</a>`;
                prevLi.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentPage > 1) {
                        currentPage--;
                        filterRequests();
                    }
                });
                pagination.appendChild(prevLi);
                
                // Page numbers
                for (let i = 1; i <= totalPages; i++) {
                    const pageLi = document.createElement('div');
                    pageLi.className = `page-item ${i === currentPage ? 'active' : ''}`;
                    pageLi.innerHTML = `<a href="#" class="page-link">${i}</a>`;
                    pageLi.querySelector('a').addEventListener('click', function(e) {
                        e.preventDefault();
                        currentPage = i;
                        filterRequests();
                    });
                    pagination.appendChild(pageLi);
                }
                
                // Next button
                const nextLi = document.createElement('div');
                nextLi.className = 'page-item';
                nextLi.innerHTML = `<a href="#" class="page-link" id="nextPage">»</a>`;
                nextLi.querySelector('a').addEventListener('click', function(e) {
                    e.preventDefault();
                    if (currentPage < totalPages) {
                        currentPage++;
                        filterRequests();
                    }
                });
                pagination.appendChild(nextLi);
            }
            
            // Add event listeners to action buttons
            document.querySelectorAll('.view-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const requestId = parseInt(this.getAttribute('data-id'));
                    viewRequestDetails(requestId);
                });
            });
            
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const requestId = parseInt(this.getAttribute('data-id'));
                    editRequest(requestId);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const requestId = parseInt(this.getAttribute('data-id'));
                    deleteRequest(requestId);
                });
            });
        }

        // View Request Details
        function viewRequestDetails(requestId) {
            const savedRequests = localStorage.getItem('consultationRequests');
            const requests = savedRequests ? JSON.parse(savedRequests) : [];
            const request = requests.find(r => r.id === requestId);
            
            if (!request) {
                showNotification('Заявка не найдена', 'error');
                return;
            }
            
            // Format date
            const requestDate = new Date(request.date);
            const formattedDate = requestDate.toLocaleDateString('ru-RU', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Format service
            const serviceNames = {
                'civil': 'Гражданское право',
                'family': 'Семейное право',
                'labor': 'Трудовое право',
                'tax': 'Налоговое право',
                'corporate': 'Корпоративное право',
                'other': 'Другое'
            };
            const serviceName = serviceNames[request.service] || request.service;
            
            // Status text
            let statusText = '';
            if (request.status === 'pending') {
                statusText = 'В обработке';
            } else if (request.status === 'processed') {
                statusText = 'Обработана';
            } else if (request.status === 'rejected') {
                statusText = 'Отклонена';
            }
            
            // Populate modal
            const modalContent = document.getElementById('requestDetailsContent');
            modalContent.innerHTML = `
                <div class="detail-row">
                    <strong>ID:</strong>
                    <span>${request.id}</span>
                </div>
                <div class="detail-row">
                    <strong>Имя:</strong>
                    <span>${request.name}</span>
                </div>
                <div class="detail-row">
                    <strong>Телефон:</strong>
                    <span>${request.phone}</span>
                </div>
                <div class="detail-row">
                    <strong>Email:</strong>
                    <span>${request.email || 'Не указан'}</span>
                </div>
                <div class="detail-row">
                    <strong>Услуга:</strong>
                    <span>${serviceName}</span>
                </div>
                <div class="detail-row">
                    <strong>Дата и время:</strong>
                    <span>${formattedDate}</span>
                </div>
                <div class="detail-row">
                    <strong>Статус:</strong>
                    <span>${statusText}</span>
                </div>
                <div class="detail-row full-width">
                    <strong>Сообщение:</strong>
                    <p>${request.message || 'Не указано'}</p>
                </div>
                <div class="detail-actions">
                    <button class="btn btn-secondary" id="closeDetailsBtn">Закрыть</button>
                    <button class="btn btn-primary" id="changeStatusBtn">Изменить статус</button>
                </div>
            `;
            
            // Show modal
            document.getElementById('requestDetailsModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Add event listeners
            document.getElementById('closeDetailsBtn').addEventListener('click', function() {
                document.getElementById('requestDetailsModal').style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            document.getElementById('changeStatusBtn').addEventListener('click', function() {
                const newStatus = prompt('Введите новый статус (pending, processed, rejected):', request.status);
                if (newStatus && ['pending', 'processed', 'rejected'].includes(newStatus)) {
                    request.status = newStatus;
                    localStorage.setItem('consultationRequests', JSON.stringify(requests));
                    filterRequests();
                    document.getElementById('requestDetailsModal').style.display = 'none';
                    document.body.style.overflow = 'auto';
                    showNotification('Статус заявки обновлен', 'success');
                } else if (newStatus !== null) {
                    showNotification('Некорректный статус', 'error');
                }
            });
        }

        // Edit Request
        function editRequest(requestId) {
            const savedRequests = localStorage.getItem('consultationRequests');
            const requests = savedRequests ? JSON.parse(savedRequests) : [];
            const request = requests.find(r => r.id === requestId);
            
            if (!request) {
                showNotification('Заявка не найдена', 'error');
                return;
            }
            
            // Populate modal
            const modalContent = document.getElementById('contentEditForm');
            modalContent.innerHTML = `
                <div class="form-group">
                    <label for="editName">Имя:</label>
                    <input type="text" id="editName" class="form-control" value="${request.name}">
                </div>
                <div class="form-group">
                    <label for="editPhone">Телефон:</label>
                    <input type="tel" id="editPhone" class="form-control" value="${request.phone}">
                </div>
                <div class="form-group">
                    <label for="editEmail">Email:</label>
                    <input type="email" id="editEmail" class="form-control" value="${request.email || ''}">
                </div>
                <div class="form-group">
                    <label for="editService">Услуга:</label>
                    <select id="editService" class="form-control">
                        <option value="civil" ${request.service === 'civil' ? 'selected' : ''}>Гражданское право</option>
                        <option value="family" ${request.service === 'family' ? 'selected' : ''}>Семейное право</option>
                        <option value="labor" ${request.service === 'labor' ? 'selected' : ''}>Трудовое право</option>
                        <option value="tax" ${request.service === 'tax' ? 'selected' : ''}>Налоговое право</option>
                        <option value="corporate" ${request.service === 'corporate' ? 'selected' : ''}>Корпоративное право</option>
                        <option value="other" ${request.service === 'other' ? 'selected' : ''}>Другое</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editMessage">Сообщение:</label>
                    <textarea id="editMessage" class="form-control">${request.message || ''}</textarea>
                </div>
                <div class="form-actions">
                    <button class="btn btn-secondary" id="cancelEditRequestBtn">Отмена</button>
                    <button class="btn btn-primary" id="saveEditRequestBtn">Сохранить</button>
                </div>
            `;
            
            // Show modal
            document.getElementById('contentEditModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // Add event listeners
            document.getElementById('cancelEditRequestBtn').addEventListener('click', function() {
                document.getElementById('contentEditModal').style.display = 'none';
                document.body.style.overflow = 'auto';
            });
            
            document.getElementById('saveEditRequestBtn').addEventListener('click', function() {
                request.name = document.getElementById('editName').value;
                request.phone = document.getElementById('editPhone').value;
                request.email = document.getElementById('editEmail').value;
                request.service = document.getElementById('editService').value;
                request.message = document.getElementById('editMessage').value;
                
                localStorage.setItem('consultationRequests', JSON.stringify(requests));
                filterRequests();
                document.getElementById('contentEditModal').style.display = 'none';
                document.body.style.overflow = 'auto';
                showNotification('Заявка обновлена', 'success');
            });
        }

        // Delete Request
        function deleteRequest(requestId) {
            if (!confirm('Вы уверены, что хотите удалить эту заявку?')) return;
            
            const savedRequests = localStorage.getItem('consultationRequests');
            const requests = savedRequests ? JSON.parse(savedRequests) : [];
            const updatedRequests = requests.filter(r => r.id !== requestId);
            
            localStorage.setItem('consultationRequests', JSON.stringify(updatedRequests));
            filterRequests();
            showNotification('Заявка удалена', 'success');
        }

        // Delete Document
        function deleteDocument(docId) {
            if (!confirm('Вы уверены, что хотите удалить этот документ?')) return;
            
            siteSettings.documents = siteSettings.documents.filter(doc => doc.id !== docId);
            savePhotos();
            
            // Remove from UI
            document.querySelectorAll('.document-item').forEach(item => {
                if (parseInt(item.querySelector('.delete-document').getAttribute('data-id')) === docId) {
                    item.remove();
                }
            });
            
            showNotification('Документ удален', 'success');
        }

        // Toggle Edit Mode
        function toggleEditMode() {
            editMode = !editMode;
            
            if (editMode) {
                // Enable edit mode
                document.getElementById('editModeIndicator').style.display = 'block';
                document.getElementById('editorToolbar').style.display = 'flex';
                
                // Make all editable elements clickable
                document.querySelectorAll('[data-editable="true"]').forEach(element => {
                    element.classList.add('editable');
                    element.addEventListener('click', handleEditableClick);
                });
                
                showNotification('Режим редактирования включен. Кликните на любой текст для редактирования.', 'info');
            } else {
                // Disable edit mode
                document.getElementById('editModeIndicator').style.display = 'none';
                document.getElementById('editorToolbar').style.display = 'none';
                
                // Remove editable classes and event listeners
                document.querySelectorAll('[data-editable="true"]').forEach(element => {
                    element.classList.remove('editable');
                    element.classList.remove('active');
                    element.removeEventListener('click', handleEditableClick);
                });
                
                // Clear currently edited element
                currentlyEditedElement = null;
                
                showNotification('Режим редактирования выключен', 'info');
            }
        }

        // Handle click on editable element
        function handleEditableClick(e) {
            e.preventDefault();
            e.stopPropagation();
            
            // Remove active class from all elements
            document.querySelectorAll('[data-editable="true"]').forEach(element => {
                element.classList.remove('active');
            });
            
            // Add active class to clicked element
            this.classList.add('active');
            currentlyEditedElement = this;
            
            // Focus the element for editing
            this.focus();
            
            // Move toolbar near the element
            const rect = this.getBoundingClientRect();
            const toolbar = document.getElementById('editorToolbar');
            toolbar.style.top = `${rect.top - 60}px`;
            toolbar.style.left = `${rect.left}px`;
        }

        // Validate Consultation Form
        function validateConsultForm(form) {
            let isValid = true;
            
            // Validate name
            const nameInput = form.querySelector('input[name="name"]');
            const nameError = form.querySelector('#nameError, #modalNameError');
            if (!nameInput.value.trim()) {
                nameInput.classList.add('is-invalid');
                nameError.textContent = 'Пожалуйста, введите ваше имя';
                isValid = false;
            } else {
                nameInput.classList.remove('is-invalid');
                nameError.textContent = '';
            }
            
            // Validate phone
            const phoneInput = form.querySelector('input[name="phone"]');
            const phoneError = form.querySelector('#phoneError, #modalPhoneError');
            const phoneRegex = /^[\d\s\(\)\+\-]+$/;
            if (!phoneInput.value.trim()) {
                phoneInput.classList.add('is-invalid');
                phoneError.textContent = 'Пожалуйста, введите ваш телефон';
                isValid = false;
            } else if (!phoneRegex.test(phoneInput.value)) {
                phoneInput.classList.add('is-invalid');
                phoneError.textContent = 'Пожалуйста, введите корректный номер телефона';
                isValid = false;
            } else {
                phoneInput.classList.remove('is-invalid');
                phoneError.textContent = '';
            }
            
            // Validate email if present
            const emailInput = form.querySelector('input[name="email"]');
            if (emailInput) {
                const emailError = form.querySelector('#emailError');
                if (emailInput.value && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                    emailInput.classList.add('is-invalid');
                    emailError.textContent = 'Пожалуйста, введите корректный email';
                    isValid = false;
                } else {
                    emailInput.classList.remove('is-invalid');
                    emailError.textContent = '';
                }
            }
            
            return isValid;
        }

        // Validate Login Form
        function validateLoginForm(form) {
            let isValid = true;
            
            // Validate email
            const emailInput = form.email;
            const emailError = document.getElementById('loginEmailError');
            if (!emailInput.value.trim()) {
                emailInput.classList.add('is-invalid');
                emailError.textContent = 'Пожалуйста, введите email';
                isValid = false;
            } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                emailInput.classList.add('is-invalid');
                emailError.textContent = 'Пожалуйста, введите корректный email';
                isValid = false;
            } else {
                emailInput.classList.remove('is-invalid');
                emailError.textContent = '';
            }
            
            // Validate password
            const passwordInput = form.password;
            const passwordError = document.getElementById('loginPasswordError');
            if (!passwordInput.value.trim()) {
                passwordInput.classList.add('is-invalid');
                passwordError.textContent = 'Пожалуйста, введите пароль';
                isValid = false;
            } else if (passwordInput.value.length < 6) {
                passwordInput.classList.add('is-invalid');
                passwordError.textContent = 'Пароль должен содержать минимум 6 символов';
                isValid = false;
            } else {
                passwordInput.classList.remove('is-invalid');
                passwordError.textContent = '';
            }
            
            return isValid;
        }

        // Validate Register Form
        function validateRegisterForm(form) {
            let isValid = true;
            
            // Validate name
            const nameInput = form.name;
            const nameError = document.getElementById('regNameError');
            if (!nameInput.value.trim()) {
                nameInput.classList.add('is-invalid');
                nameError.textContent = 'Пожалуйста, введите ваше имя';
                isValid = false;
            } else {
                nameInput.classList.remove('is-invalid');
                nameError.textContent = '';
            }
            
            // Validate email
            const emailInput = form.email;
            const emailError = document.getElementById('regEmailError');
            if (!emailInput.value.trim()) {
                emailInput.classList.add('is-invalid');
                emailError.textContent = 'Пожалуйста, введите email';
                isValid = false;
            } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
                emailInput.classList.add('is-invalid');
                emailError.textContent = 'Пожалуйста, введите корректный email';
                isValid = false;
            } else {
                emailInput.classList.remove('is-invalid');
                emailError.textContent = '';
            }
            
            // Validate phone
            const phoneInput = form.phone;
            const phoneError = document.getElementById('regPhoneError');
            const phoneRegex = /^[\d\s\(\)\+\-]+$/;
            if (!phoneInput.value.trim()) {
                phoneInput.classList.add('is-invalid');
                phoneError.textContent = 'Пожалуйста, введите ваш телефон';
                isValid = false;
            } else if (!phoneRegex.test(phoneInput.value)) {
                phoneInput.classList.add('is-invalid');
                phoneError.textContent = 'Пожалуйста, введите корректный номер телефона';
                isValid = false;
            } else {
                phoneInput.classList.remove('is-invalid');
                phoneError.textContent = '';
            }
            
            // Validate password
            const passwordInput = form.password;
            const passwordError = document.getElementById('regPasswordError');
            if (!passwordInput.value.trim()) {
                passwordInput.classList.add('is-invalid');
                passwordError.textContent = 'Пожалуйста, введите пароль';
                isValid = false;
            } else if (passwordInput.value.length < 6) {
                passwordInput.classList.add('is-invalid');
                passwordError.textContent = 'Пароль должен содержать минимум 6 символов';
                isValid = false;
            } else {
                passwordInput.classList.remove('is-invalid');
                passwordError.textContent = '';
            }
            
            // Validate confirm password
            const confirmPasswordInput = form.confirmPassword;
            const confirmPasswordError = document.getElementById('regConfirmPasswordError');
            if (!confirmPasswordInput.value.trim()) {
                confirmPasswordInput.classList.add('is-invalid');
                confirmPasswordError.textContent = 'Пожалуйста, подтвердите пароль';
                isValid = false;
            } else if (confirmPasswordInput.value !== passwordInput.value) {
                confirmPasswordInput.classList.add('is-invalid');
                confirmPasswordError.textContent = 'Пароли не совпадают';
                isValid = false;
            } else {
                confirmPasswordInput.classList.remove('is-invalid');
                confirmPasswordError.textContent = '';
            }
            
            return isValid;
        }

        // Save Consultation Request
        function saveConsultationRequest(form) {
            const savedRequests = localStorage.getItem('consultationRequests');
            const requests = savedRequests ? JSON.parse(savedRequests) : [];
            
            const newRequest = {
                id: Date.now(),
                name: form.name.value,
                phone: form.phone.value,
                email: form.email?.value || '',
                service: form.service?.value || 'other',
                message: form.message?.value || '',
                date: new Date().toISOString(),
                status: 'pending'
            };
            
            requests.push(newRequest);
            localStorage.setItem('consultationRequests', JSON.stringify(requests));
            
            // Update dashboard if open
            if (document.getElementById('dashboard').classList.contains('active')) {
                initDashboard();
            }
        }

        // Check Authentication
        function checkAuth() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                document.getElementById('adminToggleBtn').style.display = 'flex';
            }
        }

        // Show Notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = `
                <span>${message}</span>
                <span class="notification-close">&times;</span>
            `;
            
            document.body.appendChild(notification);
            
            // Close button
            notification.querySelector('.notification-close').addEventListener('click', function() {
                notification.classList.add('fade-out');
                setTimeout(() => {
                    notification.remove();
                }, 500);
            });
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                notification.classList.add('fade-out');
                setTimeout(() => {
                    notification.remove();
                }, 500);
            }, 5000);
        }

        // Sticky Header
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.pageYOffset > 50) {
                header.classList.add('sticky');
            } else {
                header.classList.remove('sticky');
            }
        });
                // Switch between login and register tabs
        document.querySelectorAll('.switch-to-register').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector('.auth-tab[data-tab="register"]').click();
            });
        });

        document.querySelectorAll('.switch-to-login').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector('.auth-tab[data-tab="login"]').click();
            });
        });
    </script>
    <!--Скрипт чата-->
    <script>
    // Chat functionality
    document.addEventListener('DOMContentLoaded', function() {
        const chatButton = document.getElementById('chatButton');
        const chatModal = document.getElementById('chatModal');
        const chatClose = document.querySelector('.chat-close');
        const chatInput = document.getElementById('chatInput');
        const sendMessageBtn = document.getElementById('sendMessageBtn');
        const chatMessages = document.getElementById('chatMessages');

        // Open chat modal
        chatButton.addEventListener('click', function() {
            chatModal.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        });

        // Close chat modal
        chatClose.addEventListener('click', function() {
            chatModal.style.display = 'none';
        });

        // Send message on button click
        sendMessageBtn.addEventListener('click', sendMessage);

        // Send message on Enter key
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const messageText = chatInput.value.trim();
            if (messageText) {
                // Add user message
                addMessage(messageText, 'user');
                chatInput.value = '';
                
                // Simulate bot reply after a short delay
                setTimeout(() => {
                    const replies = [
                        "Спасибо за ваше сообщение. Как я могу вам помочь?",
                        "Я передам ваш вопрос юристу и скоро вам ответят.",
                        "Вы можете записаться на консультацию через форму на сайте.",
                        "Наш специалист скоро свяжется с вами.",
                        "Уточните, пожалуйста, ваш вопрос для более точного ответа."
                    ];
                    const randomReply = replies[Math.floor(Math.random() * replies.length)];
                    addMessage(randomReply, 'bot');
                }, 1000 + Math.random() * 2000);
            }
        }

        function addMessage(text, sender) {
            const now = new Date();
            const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message chat-message-${sender}`;
            messageDiv.innerHTML = `
                <div class="message-content">${text}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Close chat when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === chatModal) {
                chatModal.style.display = 'none';
            }
        });
    });
        // В раздел setupEventListeners() добавим:
        document.addEventListener('click', function(e) {
            if (editMode && !e.target.closest('.editable') && !e.target.closest('#editorToolbar')) {
                document.querySelectorAll('[data-editable="true"].active').forEach(el => {
                    el.classList.remove('active');
                });
                currentlyEditedElement = null;
                document.getElementById('editorToolbar').style.display = 'none';
            }
        });

        // Обновленная функция handleEditableClick
        function handleEditableClick(e) {
            if (!editMode) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            // Remove active class from all elements
            document.querySelectorAll('[data-editable="true"]').forEach(element => {
                element.classList.remove('active');
            });
            
            // Add active class to clicked element
            this.classList.add('active');
            currentlyEditedElement = this;
            
            // Move toolbar near the element
            const rect = this.getBoundingClientRect();
            const toolbar = document.getElementById('editorToolbar');
            toolbar.style.top = `${rect.top - 60}px`;
            toolbar.style.left = `${Math.min(rect.left, window.innerWidth - 350)}px`;
            toolbar.style.display = 'flex';
            
            // Focus the element for editing
            if (this.isContentEditable) {
                this.focus();
            } else {
                this.setAttribute('contenteditable', 'true');
                this.focus();
                
                // Save on blur
                this.addEventListener('blur', function() {
                    this.removeAttribute('contenteditable');
                    saveContent();
                });
            }
        }

        // Обновленная функция toggleEditMode
        function toggleEditMode() {
            editMode = !editMode;
            
            if (editMode) {
                // Enable edit mode
                document.getElementById('editModeIndicator').style.display = 'block';
                
                // Make all editable elements clickable
                document.querySelectorAll('[data-editable="true"]').forEach(element => {
                    element.classList.add('editable');
                    element.addEventListener('click', handleEditableClick);
                });
                
                showNotification('Режим редактирования включен. Кликните на любой текст для редактирования.', 'info');
            } else {
                // Disable edit mode
                document.getElementById('editModeIndicator').style.display = 'none';
                document.getElementById('editorToolbar').style.display = 'none';
                
                // Remove editable classes and event listeners
                document.querySelectorAll('[data-editable="true"]').forEach(element => {
                    element.classList.remove('editable');
                    element.classList.remove('active');
                    element.removeAttribute('contenteditable');
                    element.removeEventListener('click', handleEditableClick);
                    element.removeEventListener('blur', handleEditableBlur);
                });
                
                // Save changes
                saveContent();
                
                // Clear currently edited element
                currentlyEditedElement = null;
                
                showNotification('Режим редактирования выключен', 'info');
            }
        }

        // Добавим функцию для сохранения форматирования
        function saveFormatting() {
            if (!currentlyEditedElement) return;
            
            const html = currentlyEditedElement.innerHTML;
            currentlyEditedElement.innerHTML = html;
            saveContent();
        }

        // Обновим saveContent для сохранения только измененных элементов
        function saveContent() {
            if (!editMode) return;
            
            const content = {};
            const changedElements = document.querySelectorAll('[data-editable="true"].active');
            
            if (changedElements.length > 0) {
                changedElements.forEach(element => {
                    const key = element.getAttribute('data-key');
                    content[key] = element.innerHTML;
                });
                
                // Merge with existing content
                const savedContent = localStorage.getItem('siteContent');
                const existingContent = savedContent ? JSON.parse(savedContent) : {};
                const mergedContent = {...existingContent, ...content};
                
                localStorage.setItem('siteContent', JSON.stringify(mergedContent));
                showNotification('Изменения сохранены!', 'success');
            }
        }
        // Обновим обработчики для выбора шрифта и размера
        document.getElementById('fontFamily')?.addEventListener('change', function() {
            if (!currentlyEditedElement) return;
            execCommand('fontName', false, this.value);
        });

        document.getElementById('fontSize')?.addEventListener('change', function() {
            if (!currentlyEditedElement) return;
            execCommand('fontSize', false, this.value);
        });
        document.getElementById('saveEditBtn')?.addEventListener('click', function(e) {
            e.preventDefault();
            if (currentlyEditedElement) {
                currentlyEditedElement.removeAttribute('contenteditable');
                saveContent();
            }
            document.getElementById('editorToolbar').style.display = 'none';
            if (currentlyEditedElement) {
                currentlyEditedElement.classList.remove('active');
                currentlyEditedElement = null;
            }
        });

        document.getElementById('cancelEditBtn')?.addEventListener('click', function(e) {
            e.preventDefault();
            if (currentlyEditedElement) {
                // Восстанавливаем оригинальное содержимое
                const key = currentlyEditedElement.getAttribute('data-key');
                const savedContent = localStorage.getItem('siteContent');
                if (savedContent) {
                    const content = JSON.parse(savedContent);
                    if (content[key]) {
                        currentlyEditedElement.innerHTML = content[key];
                    }
                }
                currentlyEditedElement.removeAttribute('contenteditable');
                currentlyEditedElement.classList.remove('active');
                currentlyEditedElement = null;
            }
            document.getElementById('editorToolbar').style.display = 'none';
        });
        document.addEventListener('click', function(e) {
            if (!editMode) return;
            
            // Если клик не по редактируемому элементу и не по панели инструментов
            if (!e.target.closest('[data-editable="true"]') && !e.target.closest('#editorToolbar')) {
                // Снимаем выделение со всех элементов
                document.querySelectorAll('[data-editable="true"]').forEach(el => {
                    el.classList.remove('active');
                    el.removeAttribute('contenteditable');
                });
                
                // Скрываем панель инструментов
                document.getElementById('editorToolbar').style.display = 'none';
                
                // Сохраняем изменения
                saveContent();
                
                // Сбрасываем текущий элемент
                currentlyEditedElement = null;
            }
        });
    </script>
</body>
</html>